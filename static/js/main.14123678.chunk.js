(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{191:function(e,t,n){},197:function(e,t){},206:function(e,t){},345:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(29),c=n.n(s),i=n(3),o=n(8),l=(n(175),n(191),n(15)),u=n(34),d=n(2),b=n.n(d),j=n(6),m=n(9),h=n(25),p={ACCOUNT_SUFFIX:"testnet",NEAR_NETWORK_ID:"testnet",NEAR_NODE_URL:"https://rpc.testnet.near.org",CONTRACT_NAME:"dev-1635510732093-17387698050424",WALLET_URL:"https://wallet.testnet.near.org"},x={accountSuffix:p.NEAR_ACCOUNT_SUFFIX,networkId:p.NEAR_NETWORK_ID,nodeUrl:p.NEAR_NODE_URL,contractName:p.CONTRACT_NAME,walletUrl:p.WALLET_URL},f=n(13),O=n(14),v=n(59),g=n.n(v),w="200000000000000",N="300000000000000",k=1e22;function _(e){var t=e.contract,n=e.ft,a=e.walletConnection,r=e.account,s=e.operationalCommission,c=e.tokens,i=function(){var e=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={account_id:n,dynamic_inputs:[],dynamic_outputs:[],static_streams:[],last_action:null,ready_to_withdraw:[],total_incoming:[],total_outgoing:[],total_received:[],is_external_update_enabled:!1,cron_task:null},e.prev=1,e.next=4,t.get_account({account_id:n});case 4:return r=e.sent,e.abrupt("return",r||a);case 8:e.prev=8,e.t0=e.catch(1),console.debug("near error",e.t0);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();function o(){return(o=Object(j.a)(b.a.mark((function e(n){var a,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.tokensWithoutStorage,c=void 0===a?0:a,e.next=3,t.update_account({account_id:r.accountId},w,new g.a(k).multipliedBy(c).plus(s).toFixed());case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(j.a)(b.a.mark((function e(n){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,r=n.autoDeposit,e.next=3,t.change_auto_deposit({stream_id:a,auto_deposit:r},w,s);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(j.a)(b.a.mark((function e(a){var r,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.streamId,s=a.token,c=a.deposit,"NEAR"!==s){e.next=6;break}return e.next=4,t.deposit({stream_id:r},w,c);case 4:e.next=9;break;case 6:return i=n[s].contract,e.next=9,i.ft_transfer_call({receiver_id:t.contractId,amount:c,memo:"xyiming transfer",msg:JSON.stringify({Deposit:r})},w,1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,e.next=3,t.pause_stream({stream_id:a},w,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,e.next=3,t.start_stream({stream_id:a},w,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,e.next=3,t.stop_stream({stream_id:a},w,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(j.a)(b.a.mark((function e(r){var s,i,o,l,u,d,j,m,h,p,x,f,O,v,N=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.deposit,i=r.receiverId,o=r.token,l=r.speed,u=r.description,d=r.autoDepositEnabled,j=void 0!==d&&d,m=r.isAutoStartEnabled,h=void 0===m||m,p=N.length>1&&void 0!==N[1]?N[1]:{},x=p.callbackUrl,O=c[o].commission_on_create,e.prev=3,"NEAR"!==o){e.next=10;break}return e.next=7,t.create_stream({args:{owner_id:a.getAccountId(),receiver_id:i,token_name:o,tokens_per_tick:l,description:u,is_auto_deposit_enabled:j,is_auto_start_enabled:h},gas:w,amount:new g.a(s).plus(O).toFixed(),callbackUrl:x});case 7:f=e.sent,e.next=14;break;case 10:return v=n[o].contract,e.next=13,v.ft_transfer_call({args:{receiver_id:t.contractId,amount:new g.a(s).plus(O).toFixed(),memo:"Roketo transfer",msg:JSON.stringify({Create:{description:u,owner_id:a.getAccountId(),receiver_id:i,token_name:o,tokens_per_tick:l,balance:s,is_auto_deposit_enabled:j,is_auto_start_enabled:h}})},gas:w,amount:1,callbackUrl:x});case 13:f=e.sent;case 14:return e.abrupt("return",f);case 17:throw e.prev=17,e.t0=e.catch(3),console.debug(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}function x(){return(x=Object(j.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,e.next=3,t.get_stream({stream_id:a});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(j.a)(b.a.mark((function e(n){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,r=n.auto_deposit,e.next=3,t.change_auto_deposit({stream_id:a,auto_deposit:r},w,s);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(j.a)(b.a.mark((function e(n){var a,r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.streamId,r=n.from,s=n.to,e.next=3,t.get_stream_history({stream_id:a,from:r,to:s});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start_cron({},N,s);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_status({});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{getStatus:function(){return _.apply(this,arguments)},getCurrentAccount:function(){return i(a.getAccountId())},updateAccount:function(e){return o.apply(this,arguments)},getAccount:i,createStream:function(e){return p.apply(this,arguments)},depositStream:function(e){return u.apply(this,arguments)},pauseStream:function(e){return d.apply(this,arguments)},startStream:function(e){return m.apply(this,arguments)},stopStream:function(e){return h.apply(this,arguments)},getStream:function(e){return x.apply(this,arguments)},change_auto_deposit:function(e){return f.apply(this,arguments)},getStreamHistory:function(e){return O.apply(this,arguments)},changeAutoDeposit:function(e){return l.apply(this,arguments)},startCron:function(){return v.apply(this,arguments)}}}var y=function(){function e(t){var n=t.account,a=t.walletConnection;Object(f.a)(this,e),this.inited=!1,this._walletConnection=a,this._account=n,this._contract=null,this.ft={},this.status={dao_id:"",num_tokens_listed:0,operational_commission:"0",tokens:[{name:"",ticker:"",account_id:"",is_active:!1,commission_on_create:"0",commission_percentage:0,total_commission:"0"}]},this.api=null}return Object(O.a)(e,[{key:"init",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this._contract=new h.Contract(this._account,x.contractName,{viewMethods:["get_account","get_stream","get_stream_history","get_status"],changeMethods:["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream","change_auto_deposit","start_cron"]}),e.next=5,this._contract.get_status({});case 5:this.status=e.sent,console.log(this.status),t=this.status.tokens,this.ft={},console.debug("Generating FT contracts for",t),t.forEach((function(e){n.ft[e.ticker]={name:e.ticker,address:e.account_id,contract:new h.Contract(n._account,e.account_id,{viewMethods:["ft_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]})}})),this.api=_({contract:this._contract,ft:this.ft,walletConnection:this._walletConnection,account:this._account,operationalCommission:this.status.operational_commission,tokens:this.tokensMap}),this.inited=!0;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tokenMeta",value:function(e){return this.status.tokens.find((function(t){return t.ticker===e}))}},{key:"tokensMap",get:function(){var e={};return this.status.tokens.forEach((function(t){e[t.ticker]=t})),e}}]),e}(),C=n(160),I=n(19),S=n.n(I),A="250000000000000",E=new Error("Deposit it too small.");var T=function(){function e(t){var n=t.near,a=t.wallet,r=t.operationalCommission,s=t.contractId;Object(f.a)(this,e),a&&r&&s&&(this._accountId=a.getAccountId(),this._near=n,this._targetContractId=s,this._operationalCommission=r,this._contract=new h.Contract(a.account(),"cron.in.testnet",{viewMethods:["get_task","get_all_tasks","get_tasks","get_total_tasks_per_agent_per_slot"],changeMethods:["create_task","update_task"]}))}return Object(O.a)(e,[{key:"getTask",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.get_task({task_hash:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTask",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.cadence,!((a=t.amount)<this._operationalCommission)){e.next=3;break}throw E;case 3:return r=new g.a(this._operationalCommission).plus((new Date).getTime()).toFixed(),s=r,console.debug("Create Task",{cadence:n,amount:a,deposit:s}),e.next=8,this._contract.create_task({contract_id:this._targetContractId,function_id:"update_account",cadence:n,recurring:!0,deposit:s,gas:Number(A),arguments:[]},A,a);case 8:e.sent;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTask",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.hash,a=t.cadence,!((r=t.amount)<this._operationalCommission)){e.next=3;break}throw E;case 3:return e.next=5,this._contract.update_task({task_hash:n,contract_id:this._targetContractId,function_id:"update_account",cadence:a,recurring:!0,deposit:this._operationalCommission+(new Date).getTime(),gas:A,arguments:[]},A,r);case 5:e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTasks",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(C.a)(t),e.next=3,this._contract.get_all_tasks();case 3:return n=e.sent,a=n.filter((function(e){return e.owner_id===r._accountId})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var M=function e(t){var n=t.ticker,a=t.metadata;Object(f.a)(this,e),this.ticker="",this.metadata={spec:"ft-1.0.0",name:"",symbol:"",icon:"",reference:null,reference_hash:null,decimals:18},this.ticker=n,this.metadata=a},D=new M({ticker:"NEAR",metadata:{spec:null,name:"Near Protocol",symbol:"NEAR",icon:"",reference:null,reference_hash:null,decimals:24}}),R=function(){function e(t){var n=this,a=t.tokens,r=t.account;Object(f.a)(this,e),this.__tokens=a,this.__account=r,this.__contracts={},this.tokens={},a&&r&&a.forEach((function(e){n.__contracts[e.ticker]=function(e,t){return new h.Contract(e,t,{viewMethods:["ft_balance_of","ft_metadata","storage_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]})}(r,e.account_id)}))}return Object(O.a)(e,[{key:"tickers",get:function(){return Object.keys(this.tokens)}},{key:"contract",value:function(e){return this.__contracts[e]}},{key:"get",value:function(e){return this.tokens[e]||new M({ticker:e,metadata:{spec:null,name:e,symbol:e,icon:"",reference:null,reference_hash:null,decimals:24}})}},{key:"init",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.__tokens.map(function(){var e=Object(j.a)(b.a.mark((function e(n){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==n.ticker){e.next=4;break}a=D,e.next=15;break;case 4:if(n.account_id){e.next=8;break}a=new M({ticker:n.ticker,metadata:{spec:null,name:n.ticker,symbol:n.ticker,icon:"",reference:null,reference_hash:null,decimals:24}}),e.next=15;break;case 8:return r=t.contract(n.ticker),e.next=11,r.ft_metadata();case 11:if(!((s=e.sent).decimals<8)){e.next=14;break}return e.abrupt("return");case 14:a=new M({ticker:n.ticker,metadata:s});case 15:t.tokens[n.ticker]=a;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"balance",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==t){e.next=5;break}return e.next=3,this.__account.getAccountBalance();case 3:return n=e.sent,e.abrupt("return",n.total);case 5:return a=this.contract(t),e.next=8,a.ft_balance_of({account_id:this.__account.accountId});case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ftStorageBalance",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.contract(t),e.next=3,n.storage_balance_of({account_id:this.__account.accountId});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),F={keyStore:null,near:null,walletConnection:null,accountId:null,account:null},L=r.a.createContext({inited:!1,near:F,roketo:new y({}),croncat:new T({}),tokens:new R({}),auth:{signedIn:!1,signedAccountId:null},contractApi:_({}),refreshAllowance:function(){},login:function(){},logout:function(){}});function P(){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.keyStores.BrowserLocalStorageKeyStore,e.next=3,h.connect(Object.assign({deps:{keyStore:t}},x));case 3:return n=e.sent,(a=F).keyStore=t,a.near=n,a.walletConnection=new h.WalletConnection(n,x.contractName),a.accountId=a.walletConnection.getAccountId(),a.account=a.walletConnection.account(),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=new Error("Near context is not found");function U(){var e=Object(a.useContext)(L);if(!!!e)throw V;return e}var B=n(10);function H(e){var t=Math.pow(10,6),n=Math.pow(10,9),a=60*n,r=60*a,s=24*r,c=7*s,i=4*c,o=12*i,l=Math.pow(10,e),u=Intl.NumberFormat("en-US",{minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2}),d=Intl.NumberFormat("en-US",{minimumSignificantDigits:2,maximumSignificantDigits:4,maximumFractionDigits:e}),b=function(e){return e<1?d.format(e):e<1e6?u.format(e):S()(e).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0})};return{tokenPerSecondToInt:function(e){return S()(e).multiply(l).divide(n).format({mantissa:0})},toInt:function(e){return S()(e).multiply(l).format({mantissa:0})},amount:function(e){var t=S()(e).divide(l).value(),n=b(t);return n},tokensPerMS:function(e){var n=S()(e).multiply(t).divide(l);return b(n)},tokensPerS:function(e){var t=S()(e).multiply(n).divide(l).value();return b(t)},tokensPerMeaningfulPeriod:function(e){var t,u=[n,a,r,s,c,i,o],d=(t={},Object(B.a)(t,n,"second"),Object(B.a)(t,a,"minute"),Object(B.a)(t,r,"hour"),Object(B.a)(t,s,"day"),Object(B.a)(t,c,"week"),Object(B.a)(t,i,"month"),Object(B.a)(t,o,"year"),t),j=u.find((function(t){return S()(e).multiply(t).divide(l).value()>.01}))||o,m=S()(e).multiply(j).divide(l).value();return{formattedValue:b(m),unit:d[j]}},ticksToMs:function(e){return Math.round(e/t)},secondsToTicks:function(e){return e*n},speedPerSecondToTick:function(e){return S()(e).multiply(n).value()}}}window.tf=H;var z=n(35),q=n(30),Z=n(4),Y=n.n(Z),G=(n(345),n(0)),J=["icon","children","className","link","size","loading","disabled","loadingText","color","variant"],X="main",K="filled",Q="outlined";function $(e){var t=e.icon,n=e.children,a=e.className,r=e.link,s=e.size,c=e.loading,l=e.disabled,d=e.loadingText,b=e.color,j=void 0===b?"light":b,m=e.variant,h=void 0===m?"outlined":m,p=Object(o.a)(e,J),x="",f="",O="";h===X?(x="Button--main",f="normal"===s?"px-5 py-4  rounded-2xl font-semibold":"big"===s?"px-12 py-6 rounded-3xl font-bold":""):h===Q?(x="border-solid border font-semibold rounded-lg ",O="light"===j?"border-blue hover:bg-blue":"dark"===j?"border-border hover:bg-hover hover:border-hover":""):h===K&&(x="bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent");var v=r?u.b:"button";return Object(G.jsx)(v,Object(i.a)(Object(i.a)({disabled:c||l,className:Y()("inline-flex items-center justify-center p-3  whitespace-nowrap",x,f,O,l?"Button--disabled":"","transition-all",a)},p),{},{children:c?d:Object(G.jsxs)(G.Fragment,{children:[t?Object(G.jsx)("div",{className:"mr-2",children:t}):null,n]})}))}var ee=["icon","children","className","to"];function te(e){var t=e.icon,n=e.children,a=e.className,r=e.to,s=Object(o.a)(e,ee),c=Object(l.i)(r),d=c&&c.isExact;return Object(G.jsxs)(u.b,Object(i.a)(Object(i.a)({to:r,className:Y()(a,"text-white font-semibold","flex items-center px-5 py-4 rounded-xl ","group cursor-pointer whitespace-nowrap",d?"bg-hover":"","transition-all","hover:bg-hover")},s),{},{children:[Object(G.jsx)("div",{className:Y()("group-hover:text-blue",d?"text-blue":""),children:t}),Object(G.jsx)("div",{className:"ml-2",children:n})]}))}n(350);var ne=["children","className","error"];function ae(e){var t=e.children,n=e.className,a=e.error,r=Object(o.a)(e,ne),s=a?"border-red-400":"border-border";return Object(G.jsx)("label",Object(i.a)(Object(i.a)({className:Y()("Input font-semibold flex p-4 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue",s,n)},r),{},{children:t}))}var re=["children","label","error","className"];function se(e){var t=e.children,n=e.label,a=e.error,r=e.className,s=Object(o.a)(e,re);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:Y()("block",r)},s),{},{children:[Object(G.jsx)("div",{className:"mb-1",children:n}),Object(G.jsx)("div",{children:t}),a?Object(G.jsx)("div",{className:"text-red-500 mt-1 text-xs",children:a}):null]}))}function ce(e){var t=e.count,n=e.option;return Object(G.jsxs)("span",{children:[n," ",Object(G.jsx)("span",{className:"text-gray font-normal",children:t})]})}function ie(e){var t=e.label,n=e.options,r=e.renderOption,s=e.renderActive,c=e.active,i=e.minimal,o=e.onChange,l=e.className,u=Object(a.useState)(!1),d=Object(m.a)(u,2),b=d[0],j=d[1];return Object(G.jsxs)("div",{className:Y()("inline-flex items-center relative",l),children:[Object(G.jsx)("div",{className:"text-gray mr-2",children:t}),Object(G.jsx)(me,{minimal:i,rounded:!0,onChange:j,children:s?s(c):c}),Object(G.jsx)(le,{opened:b,className:"right-0",onClose:function(){j(!1)},children:n.map((function(e,t){return Object(G.jsx)(ue,{children:Object(G.jsx)(he,{label:r?r(e,c===e):e,active:c===e,value:e,onChange:o})},t)}))})]})}var oe=["children","className"];function le(e){var t=e.opened,n=e.children,a=e.className,s=e.onClose,c=r.a.useRef();return function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};r.a.useEffect((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}))}(c,(function(){t&&s()})),Object(G.jsx)("div",{ref:c,className:Y()(a,"absolute top-full pt-2",t?"flex":"hidden"),children:Object(G.jsx)("div",{className:Y()("w-full bg-hover rounded-2xl py-2"),children:n})})}function ue(e){var t=e.children,n=e.className,a=Object(o.a)(e,oe);return Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()("px-5 py-1 font-semibold text-sm hover:font-bold",n)},a),{},{children:t}))}function de(){return Object(G.jsx)("div",{className:"border-dark border-t w-full my-2"})}var be=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(G.jsx)("path",{d:"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731",stroke:"white",strokeWidth:"1.5"})}))},je=["opened","className","children","onChange","rounded","minimal"];function me(e){var t=e.opened,n=e.className,a=e.children,r=e.onChange,s=e.rounded,c=e.minimal,l=Object(o.a)(e,je),u=c?"":"px-4 py-3 border border-border w-36 hover:bg-hover hover:border-hover";return Object(G.jsxs)("button",Object(i.a)(Object(i.a)({type:"button",onClick:function(){return r(!t)},className:Y()("cursor-pointer flex items-center",n,u,s?"rounded-full":"rounded-lg")},l),{},{children:[a,Object(G.jsx)("div",{className:"flex-grow"}),Object(G.jsx)(be,{className:Y()("ml-2","transform",t?"rotate-180":"")})]}))}function he(e){var t=e.active,n=e.label,a=e.value,r=e.onChange;return Object(G.jsxs)("label",{className:"inline-flex items-center whitespace-nowrap",children:[Object(G.jsx)("input",{type:"radio",className:"invisible w-0 h-0 absolute",checked:t,onChange:function(){return r(a)}}),Object(G.jsx)("div",{className:Y()(t?"border-blue border-4":"border-border border-2","border-full w-3 h-3 rounded-full")}),Object(G.jsx)("div",{className:Y()(t?"font-semibold":"","ml-3 flex"),children:n})]})}var pe=n(18),xe=n(74),fe=["progresses","className"],Oe=["progresses","className"],ve=[["#4743FB","#C750FF"],["#FFCC69","#FF8469"]],ge=["linear-gradient(270deg, ".concat(ve[0][0]," 0%, ").concat(ve[0][1]," 100%)"),"linear-gradient(270deg, ".concat(ve[1][0]," 0%, ").concat(ve[1][1]," 100%)")];function we(e){var t=e.progresses,n=e.className,a=Object(o.a)(e,fe),r=Object(pe.a)(t);return r.sort((function(e,t){return t-e})),Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()("relative h-3 rounded-r-md rounded-l-lg bg-progressBar",n)},a),{},{children:r.map((function(e,t){return Object(G.jsx)("div",{className:"absolute left-0 h-full rounded-lg",style:{width:100*e+"%",background:ge[t]}},t)}))}))}function Ne(e){var t=e.endColor,n=e.startColor,a=e.progressValue,r=e.idCSS,s=e.rotation,c="rotate(".concat(s,")");return Object(G.jsx)("svg",{style:{height:0},children:Object(G.jsx)("defs",{children:Object(G.jsxs)("linearGradient",{id:r,gradientTransform:c,children:[Object(G.jsx)("stop",{offset:"0%",stopColor:n}),a>0&&a<100?Object(G.jsx)("stop",{offset:"".concat(a,'%"'),stopColor:t}):null,Object(G.jsx)("stop",{offset:"100%",stopColor:t})]})})})}function ke(e){var t=e.progresses,n=e.className,a=Object(o.a)(e,Oe);t.sort((function(e,t){return t-e}));return Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()(n)},a),{},{children:Object(G.jsxs)(xe.b,{circleRatio:.5,styles:Object(xe.c)({rotation:.75,pathColor:"#0D0B26",strokeLinecap:"round"}),value:1,minValue:0,maxValue:1,children:[ve.map((function(e,t){return Object(G.jsx)(Ne,{idCSS:"__arcProgressBar_grad_".concat(t),rotation:90,startColor:e[0],endColor:e[1]})})),t.map((function(e,t){return Object(G.jsx)(xe.a,{circleRatio:.5,className:"absolute inset-0",value:e,styles:Object(xe.c)({rotation:.75,trailColor:"transparent",pathColor:"url(#__arcProgressBar_grad_".concat(t,")"),strokeLinecap:"round"}),minValue:0,maxValue:1})}))]})}))}var _e=["tokenName","className"],ye=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(G.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(G.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))},Ce=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(G.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(G.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))};function Ie(e){var t=e.tokenName,n=e.className,a=Object(o.a)(e,_e),r=U().tokens.get(t).metadata.icon,s={NEAR:ye,fallback:Ce};if(r)return Object(G.jsx)("img",Object(i.a)({src:r,alt:t,className:n},a));var c=s[t]||s.fallback;return Object(G.jsx)(c,Object(i.a)({className:n},a))}var Se=["tokenName","size","className"];function Ae(e){var t=e.tokenName,n=e.size,a=void 0===n?8:n,r=e.className,s=Object(o.a)(e,Se);return Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()("p-1 flex-shrink-0 rounded-lg bg-card2 inline-flex items-center justify-center","w-".concat(a," h-").concat(a),r)},s),{},{children:Object(G.jsx)(Ie,{className:"w-full h-full rounded-full",tokenName:t})}))}n(351);var Ee=n(170),Te=["placement","children","html","overlay"];function Me(e){var t=e.placement,n=void 0===t?"top":t,a=e.children,r=e.html,s=e.overlay,c=Object(o.a)(e,Te);return Object(G.jsx)(Ee.a,Object(i.a)(Object(i.a)({placement:n,overlay:r?Object(G.jsx)("div",{dangerouslySetInnerHTML:{__html:r}}):s},c),{},{children:a||Object(G.jsx)("span",{className:"Tooltip__defaultIcon",children:"?"})}))}var De=["className"];function Re(e){var t=e.className,n=Object(o.a)(e,De);return Object(G.jsx)("div",Object(i.a)({className:Y()("inline-block w-2 h-2 flex-shrink-9 rounded-full",t)},n))}function Fe(e){return H(U().tokens.get(e).metadata.decimals)}function Le(e){var t=e.onChange,n=e.deposit,r=void 0===n?0:n,s=Fe(e.token),c=Object(a.useState)(0),i=Object(m.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(0),d=Object(m.a)(u,2),b=d[0],j=d[1],h=Object(a.useState)(0),p=Object(m.a)(h,2),x=p[0],f=p[1],O=86400*o+60*b+3600*x,v=Math.round(r/s.secondsToTicks(O));(isNaN(v)||v===1/0)&&(v=0);var g=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(v);return Object(a.useEffect)((function(){g!==v&&t(v)}),[v,t,g]),Object(G.jsxs)("div",{className:"flex",label:"Stream duration",children:[Object(G.jsxs)("label",{className:"w-1/3 input font-semibold flex p-4 rounded-l-lg border-border border bg-input text-white focus-within:border-blue hover:border-blue",children:[Object(G.jsx)("input",{className:"focus:outline-none input bg-input w-1/3",placeholder:"0",value:o,onChange:function(e){l(e.target.value)}}),Object(G.jsx)("div",{className:"right-2 opacity-100 w-1/3",children:"days"})]}),Object(G.jsxs)("label",{className:"w-1/3 input font-semibold flex p-4 border-border border bg-input text-white focus-within:border-blue hover:border-blue",children:[Object(G.jsx)("input",{className:"focus:outline-none input bg-input w-1/3",placeholder:"0",value:x,onChange:function(e){return f(e.target.value)}}),Object(G.jsx)("div",{className:"right-2 opacity-100 w-1/3",children:"hours"})]}),Object(G.jsxs)("label",{className:"w-1/3 input font-semibold flex p-4 rounded-r-lg border-border border bg-input text-white focus-within:border-blue hover:border-blue",children:[Object(G.jsx)("input",{className:"focus:outline-none input bg-input w-1/3",placeholder:"0",value:b,onChange:function(e){return j(e.target.value)}}),Object(G.jsx)("div",{className:"right-2 opacity-100 w-1/3",children:"mins"})]})]})}function Pe(e){e.account;var t=e.onSubmit,n=U(),r=function(e){var t=e.near,n=e.accountId;return q.c().shape({receiver:q.d().required("Receiver is a required").test("receiver-not-equal-owner","Receiver can not be the same as owner",(function(e){return e!==n})).test("receiver-is-valida-address","Address does not exists",function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.near.near.connection.provider.query({request_type:"view_account",finality:"final",account_id:n});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),token:q.d().required(),deposit:q.b().required().moreThan(0,"Deposit should be more than 0"),speed:q.b().required().moreThan(0,"Choose stream duration"),autoDeposit:q.a(),comment:q.d().max(255)})}({accountId:n.near.walletConnection.getAccountId(),near:n}),s=Object(a.useState)(!1),c=Object(m.a)(s,2),o=c[0],l=c[1],u=Object(a.useState)(null),d=Object(m.a)(u,2),h=d[0],x=d[1],f=n.tokens.tickers,O=function(){var e=Object(j.a)(b.a.mark((function e(){var n,a,r,s,c,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=i.length,r=new Array(a),s=0;s<a;s++)r[s]=i[s];return(n=console).debug.apply(n,["Formik submit"].concat(r)),e.prev=2,e.next=5,t.apply(void 0,r);case 5:return c=e.sent,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(2),x(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(G.jsx)(z.b,{initialValues:{receiver:"",token:"NEAR",speed:0,deposit:0,autoDeposit:!1,autoStart:!0,comment:""},validationSchema:r,onSubmit:O,validateOnBlur:!1,validateOnChange:!1,validateOnMount:!1,children:function(e){var t=e.values,a=e.setFieldValue,r=e.setFieldTouched,s=e.handleSubmit,c=e.isSubmitting,u=n.roketo.tokenMeta(t.token),d=H(n.tokens.get(t.token).metadata.decimals);return Object(G.jsxs)("form",{className:"max-w-lg mx-auto w-full",onSubmit:s,children:[Object(G.jsx)(z.a,{name:"receiver",children:function(e){var t=e.field,n=e.form,a=(n.touched,n.errors,e.meta);return Object(G.jsx)(se,{label:"Receiver:",className:"mb-4",error:a.error,children:Object(G.jsx)(ae,{children:Object(G.jsx)("input",Object(i.a)({placeholder:"receiver."+p.ACCOUNT_SUFFIX,id:"ownerInput"},t))})})}}),Object(G.jsxs)("div",{className:"flex mb-4",children:[Object(G.jsx)(z.a,{name:"token",children:function(e){var t=e.field,n=e.form,s=(n.touched,n.errors,e.meta);return Object(G.jsxs)(se,{label:"Token:",className:"w-1/3 items-center relative",error:s.error,children:[Object(G.jsx)(me,{minimal:!0,className:"bg-input text-white focus-within:border-blue hover:border-blue text-xl h-14 px-4 py-3 border border-border w-36",onChange:l,children:Object(G.jsxs)("div",{className:"inline-flex items-center",children:[Object(G.jsx)(Ae,{tokenName:t.value,className:"mr-1"})," ",Object(G.jsx)("span",{children:t.value})]})}),Object(G.jsx)(le,{opened:o,className:"z-10",onClose:function(){return l(!1)},children:f.map((function(e){return Object(G.jsx)(ue,{className:"focus-within:border-blue",children:Object(G.jsx)(he,{label:Object(G.jsxs)("div",{className:"inline-flex items-center",children:[Object(G.jsx)(Ae,{size:6,tokenName:e,className:"mr-1"})," ",Object(G.jsx)("span",{children:e})]}),active:t.value===e,value:e,onChange:function(e){l(!1),a(t.name,e,!1),r(t.name,!0,!1)}})},e)}))})]})}}),Object(G.jsx)(z.a,{name:"deposit",children:function(e){var t=e.field,n=e.form,a=(n.touched,n.errors,e.meta);return Object(G.jsx)(se,{label:Object(G.jsxs)("span",{children:[Object(G.jsx)("span",{children:"Stream initial deposit:"}),Object(G.jsx)(Me,{className:"ml-2",overlay:"Funds which will be used to create an initial stream for a set period. This deposit can be extended in manual or automatical mode."})]}),className:"w-2/3",error:a.error,children:Object(G.jsx)(ae,{children:Object(G.jsx)("input",Object(i.a)({placeholder:"0.00"},t))})})}})]}),Object(G.jsx)("div",{className:"block mb-4",children:Object(G.jsx)(z.a,{name:"speed",children:function(e){var n=e.field,s=e.form,c=(s.touched,s.errors,e.meta);return Object(G.jsxs)(se,{label:Object(G.jsxs)("div",{className:"relative",children:[Object(G.jsxs)("div",{children:["Period to unlock the initial deposit:"," ",Object(G.jsx)(Me,{className:"ml-2",overlay:"In case of no extensions for an initial deposit after this period will be reached reciever will be able to withdraw whole initial deposit and close the stream. "})]}),Object(G.jsxs)("div",{className:"text-xs text-gray absolute right-0 top-1",children:["Streaming speed: ",d.tokensPerS(n.value)," ",t.token," / sec"]})]}),error:c.error,children:[" ",Object(G.jsx)(Le,{token:t.token,deposit:d.toInt(t.deposit),onChange:function(e){a(n.name,e,!1),r(n.name,!0,!1)}})]})}})}),Object(G.jsx)(z.a,{name:"comment",children:function(e){var t=e.field,n=e.form,a=(n.touched,n.errors,e.meta);return Object(G.jsx)(se,{className:"mb-6",error:a.error,label:Object(G.jsxs)("div",{className:"flex justify-between items-center",children:[Object(G.jsx)("div",{className:"mb-1",children:"Comment:"}),Object(G.jsxs)("div",{className:"text-xs text-gray",children:[t.value&&t.value.length||0,"/255"]})]}),children:Object(G.jsx)("label",{className:"h-40 Input font-semibold flex p-4 pt-0 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue border-border",children:Object(G.jsx)("textarea",Object(i.a)({id:"commentInput",className:" bg-input  w-full h-full pt-2 focus:outline-none resize-none",placeholder:"Enter comment",maxLength:"255"},t))})})}}),h&&Object(G.jsxs)("p",{className:"text-special-inactive my-4",children:["Submit error: ",h.message]}),Object(G.jsxs)("div",{className:"flex relaitive",children:[Object(G.jsxs)("div",{children:[Object(G.jsxs)("label",{className:"flex",children:[Object(G.jsx)(z.a,{name:"autoDeposit",className:"mr-1",type:"checkbox"}),Object(G.jsxs)("span",{children:["Enable auto deposit?"," ",Object(G.jsx)(Me,{className:"ml-2",overlay:"Check this if you want make this stream infinite extending getting deposits from income streams with saving initial stream speed."})]})]}),Object(G.jsxs)("label",{className:"flex",children:[Object(G.jsx)(z.a,{name:"autoStart",className:"mr-1",type:"checkbox"}),Object(G.jsxs)("span",{children:["Start stream immediately?"," ",Object(G.jsx)(Me,{className:"ml-2",overlay:"Check this if you want this stream to start transfering funds immediatly."})]})]}),Object(G.jsxs)("p",{className:"text-left text-gray w-2/3 text-sm",children:["You will be charged"," ",d.amount(u.commission_on_create)," ",u.ticker," fee for that stream"]})]}),Object(G.jsx)($,{disabled:c,variant:"main",size:"big",className:"rounded-lg",children:"Create Stream"})]})]})}})}var We=Object(l.f)("streams"),Ve=window.location.origin+"/#/"+We;var Ue=function(){var e=U();function t(){return(t=Object(j.a)(b.a.mark((function t(n){var a,r,s,c,i,o,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.receiver,r=n.autoDeposit,s=n.autoStart,c=n.comment,i=n.deposit,o=n.speed,l=n.token,u=H(e.tokens.get(l).metadata.decimals),t.next=4,e.contractApi.createStream({deposit:u.toInt(i),description:c,receiverId:a,token:l,speed:String(o),autoDepositEnabled:r,isAutoStartEnabled:s},{callbackUrl:Ve});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(G.jsxs)("div",{className:"container m-auto px-5 py-12",children:[Object(G.jsxs)("div",{className:"text-center",children:[Object(G.jsx)("h1",{className:"text-5xl mb-4 text-center",children:"Create a stream"}),Object(G.jsx)("p",{className:"text-gray",children:"Stream your tokens to the receiver directly"})]}),Object(G.jsx)(Pe,{onSubmit:function(e){return t.apply(this,arguments)}})]})},Be=function(){return Object(G.jsxs)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(G.jsx)("path",{d:"M12.1884 4.70767H13.2423C14.6173 4.70767 15.7319 5.82227 15.7319 7.1972V12.6244C15.7319 13.9994 14.6173 15.114 13.2423 15.114H7.81509C6.44016 15.114 5.32556 13.9994 5.32556 12.6244V11.5705",stroke:"currentColor",strokeWidth:"1.65968"}),Object(G.jsx)("rect",{x:"1.46289",y:"1.3735",width:"10.4063",height:"10.4063",rx:"2.48952",stroke:"currentColor",strokeWidth:"1.65968"})]})},He=function(){return Object(G.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{d:"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})})},ze=function(){return Object(G.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(G.jsx)("circle",{cx:"2.08925",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(G.jsx)("circle",{cx:"11.1691",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(G.jsx)("circle",{cx:"2.08925",cy:"11.1198",r:"2.03994",fill:"currentColor"}),Object(G.jsx)("circle",{cx:"11.1691",cy:"11.1198",r:"2.03994",fill:"currentColor"})]})},qe=function(){return Object(G.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(G.jsx)("path",{d:"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"}),Object(G.jsx)("path",{d:"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"})]})},Ze=function(){return Object(G.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(G.jsx)("path",{d:"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"}),Object(G.jsx)("path",{d:"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"})]})},Ye=function(){return Object(G.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{d:"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},Ge=function(){return Object(G.jsx)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{d:"M10.0818 9.73921L10.0818 21.718M10.0818 21.718L18.5945 13.2589M10.0818 21.718L1.5691 13.2589M10.0823 4.3827L10.0823 1.78194",stroke:"#8DA6FF",strokeWidth:"2",strokeLinecap:"round"})})},Je=function(){return Object(G.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{d:"M8.56036 0.603882C6.45869 0.609876 4.4396 1.4228 2.9201 2.87474V1.42369C2.9201 1.20626 2.83373 0.997741 2.67998 0.843997C2.52624 0.690254 2.31772 0.603882 2.10029 0.603882C1.88287 0.603882 1.67435 0.690254 1.5206 0.843997C1.36686 0.997741 1.28049 1.20626 1.28049 1.42369V5.11281C1.28049 5.33024 1.36686 5.53876 1.5206 5.6925C1.67435 5.84625 1.88287 5.93262 2.10029 5.93262H5.78942C6.00684 5.93262 6.21536 5.84625 6.36911 5.6925C6.52285 5.53876 6.60922 5.33024 6.60922 5.11281C6.60922 4.89539 6.52285 4.68687 6.36911 4.53312C6.21536 4.37938 6.00684 4.29301 5.78942 4.29301H3.82188C4.87597 3.19148 6.2809 2.49161 7.7951 2.31373C9.3093 2.13584 10.8382 2.49105 12.1189 3.31829C13.3995 4.14554 14.352 5.39311 14.8125 6.84653C15.2729 8.29994 15.2127 9.86838 14.642 11.2822C14.0714 12.696 13.026 13.8668 11.6856 14.5933C10.3452 15.3198 8.79358 15.5567 7.2975 15.2631C5.80141 14.9695 4.45434 14.1639 3.48789 12.9847C2.52144 11.8056 1.996 10.3265 2.00192 8.80194C2.00192 8.58451 1.91554 8.37599 1.7618 8.22225C1.60806 8.0685 1.39954 7.98213 1.18211 7.98213C0.964684 7.98213 0.756164 8.0685 0.60242 8.22225C0.448677 8.37599 0.362305 8.58451 0.362305 8.80194C0.362305 10.4234 0.843112 12.0084 1.74393 13.3565C2.64474 14.7047 3.9251 15.7555 5.4231 16.376C6.9211 16.9964 8.56945 17.1588 10.1597 16.8425C11.75 16.5261 13.2107 15.7454 14.3573 14.5988C15.5038 13.4523 16.2846 11.9916 16.6009 10.4013C16.9172 8.81103 16.7549 7.16268 16.1344 5.66468C15.5139 4.16668 14.4631 2.88632 13.115 1.9855C11.7668 1.08469 10.1818 0.603882 8.56036 0.603882ZM8.56036 5.52272C8.34293 5.52272 8.13441 5.60909 7.98067 5.76283C7.82693 5.91657 7.74055 6.12509 7.74055 6.34252V8.80194C7.74055 9.01936 7.82693 9.22788 7.98067 9.38163C8.13441 9.53537 8.34293 9.62174 8.56036 9.62174H11.8396C12.057 9.62174 12.2655 9.53537 12.4193 9.38163C12.573 9.22788 12.6594 9.01936 12.6594 8.80194C12.6594 8.58451 12.573 8.37599 12.4193 8.22225C12.2655 8.0685 12.057 7.98213 11.8396 7.98213H9.38017V6.34252C9.38017 6.12509 9.29379 5.91657 9.14005 5.76283C8.98631 5.60909 8.77779 5.52272 8.56036 5.52272Z",fill:"#9794B6"})})},Xe=function(){return Object(G.jsxs)("svg",{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(G.jsx)("path",{d:"M12.7791 5.19588C11.8893 4.62312 10.83 4.29083 9.69317 4.29083C6.54008 4.29083 3.98401 6.84691 3.98401 9.99999C3.98401 13.1531 6.54008 15.7092 9.69317 15.7092C10.7261 15.7092 11.695 15.4348 12.5309 14.9551L15.0815 17.5057C13.5648 18.5965 11.704 19.2389 9.69317 19.2389C4.59064 19.2389 0.454224 15.1025 0.454224 9.99999C0.454224 4.89746 4.59064 0.761047 9.69317 0.761047C11.8064 0.761047 13.754 1.47057 15.3106 2.66438L12.7791 5.19588Z",fill:"white"}),Object(G.jsx)("path",{d:"M17.6556 5.31123L15.0215 7.94539C15.2675 8.58293 15.4023 9.27571 15.4023 9.99999C15.4023 10.8324 15.2242 11.6232 14.904 12.3363L17.5041 14.9365C18.4085 13.5084 18.9321 11.8154 18.9321 9.99999C18.9321 8.2885 18.4667 6.6857 17.6556 5.31123Z",fill:"white"})]})},Ke=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(G.jsx)("path",{d:"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}))},Qe=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(G.jsx)("path",{d:"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z",fill:"#2EDDD9"})}))},$e=function(e){return Object(G.jsx)("svg",Object(i.a)(Object(i.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(G.jsx)("rect",{x:"0.429626",y:"0.930298",width:"9.58382",height:"9.58382",rx:"2",fill:"#F56173"})}))},et=function(e){return Object(G.jsxs)("svg",Object(i.a)(Object(i.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(G.jsx)("path",{d:"M2.42963 2.28638V8.60681",stroke:"#FFAB6A",strokeWidth:"3",strokeLinecap:"round"}),Object(G.jsx)("path",{d:"M8.76996 2.28638V8.60681",stroke:"#FFAB6A",strokeWidth:"3",strokeLinecap:"round"})]}))},tt=function(e){return Object(G.jsxs)("svg",Object(i.a)(Object(i.a)({width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(G.jsx)("circle",{cx:"14.5566",cy:"14.7314",r:"14.5",fill:"url(#paint0_linear)"}),Object(G.jsx)("path",{d:"M14.7506 10.7635L14.7506 14.7314M14.7506 18.6993L14.7506 14.7314M14.7506 14.7314L18.7185 14.7314M14.7506 14.7314L10.7827 14.7314",stroke:"#1F1D37",strokeWidth:"2.5",strokeLinecap:"round"}),Object(G.jsx)("defs",{children:Object(G.jsxs)("linearGradient",{id:"paint0_linear",x1:"-2.34261",y1:"7.84647",x2:"34.6054",y2:"32.139",gradientUnits:"userSpaceOnUse",children:[Object(G.jsx)("stop",{"stop-color":"#FF856A"}),Object(G.jsx)("stop",{offset:"1","stop-color":"#FFCD6A"})]})})]}))},nt=function(e){return Object(G.jsxs)("svg",Object(i.a)(Object(i.a)({width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(G.jsxs)("g",{clipPath:"url(#clip0)",children:[Object(G.jsx)("path",{d:"M8.31055 11.6724C8.66342 12.1442 9.11362 12.5345 9.63062 12.817C10.1476 13.0994 10.7193 13.2674 11.3069 13.3095C11.8945 13.3516 12.4843 13.2668 13.0363 13.0609C13.5883 12.855 14.0895 12.5328 14.506 12.1161L16.9711 9.65109C17.7194 8.87624 18.1335 7.83845 18.1242 6.76124C18.1148 5.68403 17.6827 4.65359 16.921 3.89186C16.1593 3.13013 15.1288 2.69805 14.0516 2.68869C12.9744 2.67933 11.9366 3.09344 11.1618 3.84181L9.74849 5.24689",stroke:"currentColor",strokeWidth:"1.64336",strokeLinecap:"round",strokeLinejoin:"round"}),Object(G.jsx)("path",{d:"M11.5972 10.0291C11.2444 9.55731 10.7942 9.16697 10.2772 8.88451C9.76017 8.60205 9.18847 8.43408 8.60085 8.392C8.01323 8.34991 7.42344 8.4347 6.87147 8.6406C6.3195 8.8465 5.81826 9.1687 5.40176 9.58535L2.93672 12.0504C2.18835 12.8252 1.77424 13.863 1.7836 14.9402C1.79296 16.0175 2.22504 17.0479 2.98677 17.8096C3.7485 18.5714 4.77894 19.0034 5.85615 19.0128C6.93336 19.0222 7.97115 18.608 8.746 17.8597L10.1511 16.4546",stroke:"currentColor",strokeWidth:"1.64336",strokeLinecap:"round",strokeLinejoin:"round"})]}),Object(G.jsx)("defs",{children:Object(G.jsx)("clipPath",{id:"clip0",children:Object(G.jsx)("rect",{width:"19.7203",height:"19.7203",fill:"white",transform:"translate(0.09375 0.990601)"})})})]}))},at=function(){return Object(G.jsx)("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{d:"M7.44798 12.8541L1.86072 7.26685L7.44798 1.67958",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})};function rt(e){var t=function(){var e=U();function t(){return(t=Object(j.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&n.preventDefault(),t.next=3,e.login();case 3:return t.abrupt("return",!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=Object(j.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{accountId:e.auth.signedAccountId,signedIn:e.auth.signedIn,inited:e.inited,login:function(e){return t.apply(this,arguments)},logout:function(e){return n.apply(this,arguments)}}}(),n=t.inited,a=t.logout,r=t.login,s=t.accountId,c=t.signedIn;return n?c?Object(G.jsxs)($,Object(i.a)(Object(i.a)({onClick:a},e),{},{children:["Sign out (",s,")"]})):Object(G.jsx)($,Object(i.a)(Object(i.a)({onClick:r},e),{},{children:"Sign in with NEAR Wallet"})):Object(G.jsxs)($,Object(i.a)(Object(i.a)({},e),{},{children:["Connecting..."," ",Object(G.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})]}))}var st="/account",ct="/streams",it="/",ot=function(e){return"/streams/".concat(e)},lt=n.p+"static/media/logo_stream_with_text.831f0892.svg";function ut(e){var t=r.a.useState(e),n=Object(m.a)(t,2),a=n[0],s=n[1];return{on:a,off:!a,toggle:function(){return s(!a)},turnOff:function(){return s(!1)},turnOn:function(){return s(!0)},setOn:s}}function dt(){var e=Object(G.jsx)("div",{className:"flex justify-start items-center",children:Object(G.jsx)("img",{src:lt,alt:"rocketo logo"})});return Object(G.jsx)("div",{className:Y()("py-4 px-6","absolute w-full pt-8","flex justify-center"),children:e})}function bt(){var e=ut(!1),t=Object(G.jsxs)("ul",{className:"flex-col lg:flex-row flex justify-center ",children:[Object(G.jsx)("li",{className:"mb-2 lg:mr-2 lg:mb-0",children:Object(G.jsx)(te,{onClick:e.turnOff,to:st,icon:Object(G.jsx)(Ye,{}),children:"Account"})}),Object(G.jsx)("li",{className:"mb-2 lg:mr-2 lg:mb-0",children:Object(G.jsx)(te,{onClick:e.turnOff,to:ct,icon:Object(G.jsx)(ze,{}),children:"My Streams"})}),Object(G.jsx)("li",{className:"mb-2 lg:mr-2 lg:mb-0",children:Object(G.jsx)(te,{onClick:e.turnOff,to:it,icon:Object(G.jsx)(He,{}),children:"Send"})})]}),n=Object(G.jsx)("div",{className:"flex justify-start items-center",children:Object(G.jsx)("img",{src:lt,alt:"rocketo logo"})});return Object(G.jsxs)("div",{className:"py-4 px-6 w-full pt-8",children:[Object(G.jsxs)("div",{className:Y()("hidden lg:grid items-center grid-cols-3 gap-3 "),children:[n,t,Object(G.jsx)("div",{className:"flex justify-end",children:Object(G.jsx)(rt,{})})]}),Object(G.jsxs)("div",{className:Y()("lg:hidden"),children:[Object(G.jsxs)("div",{className:"flex justify-between",children:[n,Object(G.jsx)("button",{className:"p-1",onClick:e.toggle,type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(G.jsx)("div",{className:Y()("burger-menu",e.on?"burger-menu--active":"")})})]}),Object(G.jsxs)("div",{className:Y()(e.on?"block":"hidden","mt-4"),children:[t,Object(G.jsx)(rt,{className:"mt-4"})]})]})]})}function jt(){return Object(l.i)("/authorize")?Object(G.jsx)(dt,{}):Object(G.jsx)(bt,{})}var mt=n(54),ht=n.n(mt),pt=["stream","direction","className"];function xt(e){var t=e.stream,n=e.direction,a=e.className,r=Object(o.a)(e,pt),s=Fe(t.ticker).tokensPerMeaningfulPeriod(t.tokens_per_tick);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:Y()("inline-flex items-center whitespace-nowrap",a)},r),{},{children:["out"===n?Object(G.jsx)(Ze,{}):"in"===n?Object(G.jsx)(qe,{}):"",Object(G.jsxs)("span",{className:"ml-2",children:[Object(G.jsxs)("span",{children:["@",s.formattedValue]}),Object(G.jsxs)("span",{children:[" ",t.ticker," / ",s.unit]})]})]}))}var ft=new Error("Provide stream id to use stream methods");function Ot(e){var t=function(){if(!e)throw ft},n=U(),a=r.a.useState(!1),s=Object(m.a)(a,2),c=s[0],i=s[1];function o(){return(o=Object(j.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tokensWithoutStorage,r=void 0===a?0:a,console.debug("updating all account"),e.next=4,n.contractApi.updateAccount({tokensWithoutStorage:r});case 4:console.debug("update completed");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(j.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(),console.debug("enable",e),a.next=4,n.contractApi.changeAutoDeposit({streamId:e,autoDeposit:!0});case 4:a.sent;case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function u(){return(u=Object(j.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(),console.debug("disabling",e),a.next=4,n.contractApi.changeAutoDeposit({streamId:e,autoDeposit:!1});case 4:a.sent;case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function d(){return(d=Object(j.a)(b.a.mark((function a(r){var s,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=r.token,c=r.deposit,t(),console.debug("depositing",s,e),a.next=5,n.contractApi.depositStream({token:s,deposit:c,streamId:e});case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function h(){return(h=Object(j.a)(b.a.mark((function a(){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(),console.debug("pausing",e),a.next=4,n.contractApi.pauseStream({streamId:e});case 4:return r=a.sent,console.debug("pausing res",r),a.abrupt("return",r);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function p(){return(p=Object(j.a)(b.a.mark((function a(){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(),console.debug("restarting",e),a.next=4,n.contractApi.startStream({streamId:e});case 4:return r=a.sent,console.debug("restarting res",r),a.abrupt("return",r);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function x(){return(x=Object(j.a)(b.a.mark((function a(){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(),console.debug("Stop called stopping",e),a.next=4,n.contractApi.stopStream({streamId:e});case 4:return r=a.sent,console.debug("stopping res",r),a.abrupt("return",r);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function f(e){return Object(j.a)(b.a.mark((function t(){var n=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:return i(!0),t.prev=3,t.next=6,e.apply(void 0,n);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,i(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})))}return{loading:c,updateAllAndWithdraw:f((function(e){return o.apply(this,arguments)})),pause:f((function(){return h.apply(this,arguments)})),restart:f((function(){return p.apply(this,arguments)})),stop:f((function(){return x.apply(this,arguments)})),deposit:f((function(e){return d.apply(this,arguments)})),enable:f((function(){return l.apply(this,arguments)})),disable:f((function(){return u.apply(this,arguments)}))}}var vt={INITIALIZED:"INITIALIZED",ACTIVE:"ACTIVE",PAUSED:"PAUSED",FINISHED:"FINISHED",INTERRUPTED:"INTERRUPTED"},gt="in",wt="out",Nt="enabled",kt="disabled",_t="Init",yt="Deposit",Ct="Start",It="Withdraw",St="Pause",At="Stop",Et=["stream","className"];function Tt(e){var t,n=e.stream,a=e.className,r=Object(o.a)(e,Et),s=(t={},Object(B.a)(t,vt.INITIALIZED,{colorClass:"text-special-active",label:"Initialized"}),Object(B.a)(t,vt.ACTIVE,{colorClass:"text-special-active",label:"Active"}),Object(B.a)(t,vt.PAUSED,{colorClass:"text-special-hold",label:"Paused"}),Object(B.a)(t,vt.FINISHED,{colorClass:"text-special-active",label:"Finished"}),Object(B.a)(t,vt.INTERRUPTED,{colorClass:"text-special-inactive",label:"Interrupted"}),t)[n.status]||{};return Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()(s.colorClass,a)},r),{},{children:s.label}))}var Mt=n(55),Dt=n.n(Mt);function Rt(e){var t=e.modalControl,n=e.onConfirm;return Object(G.jsxs)(Dt.a,{isOpen:t.on,onRequestClose:t.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(G.jsx)("h2",{className:"text-2xl mb-4",children:"Are you sure?"}),Object(G.jsx)("p",{className:"mb-6",children:"As a stream receiver, you will not be able to resume stream. Only stream owners can resume streams"}),Object(G.jsx)($,{className:"w-full",variant:"filled",type:"button",onClick:function(){t.turnOff(),n()},children:"Yes, I want to pause stream."})]})}function Ft(e){var t=e.stream,n=e.minimal,r=e.className,s=U(),c=ut(!1),i=s.near.accountId===t.owner_id,o=s.near.accountId===t.receiver_id,l=!i&&!o,u=t.status===vt.INTERRUPTED||t.status===vt.FINISHED,d=Object(a.useState)(!1),b=Object(m.a)(d,2),j=b[0],h=b[1],p=Ot(t.id);if(u||l)return Object(G.jsx)(Tt,{className:Y()(n?"":"border border-border p-4 px-6 rounded-lg",r),stream:t});var x=j&&!p.loading;return Object(G.jsxs)("div",{className:Y()(r,"relative inline-flex"),children:[Object(G.jsx)(Rt,{modalControl:c,onConfirm:p.pause}),Object(G.jsx)(me,{minimal:n,opened:x,onChange:h,children:p.loading?"Loading...":Object(G.jsx)(Tt,{stream:t})}),Object(G.jsxs)(le,{onClose:function(){return h(!1)},opened:x,className:"top-full w-44",children:[t.status!==vt.ACTIVE&&i?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ue,{children:Object(G.jsxs)("button",{className:"inline-flex items-center font-semibold",onClick:p.restart,children:[Object(G.jsx)(Qe,{className:"mr-4 flex-shrink-0"}),Object(G.jsx)("span",{children:"Start stream "})," "]})}),Object(G.jsx)(de,{})]}):null,t.status!==vt.PAUSED?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ue,{children:Object(G.jsxs)("button",{className:"inline-flex items-center font-semibold",onClick:function(){o?c.turnOn():p.pause()},children:[Object(G.jsx)(et,{className:"mr-4 flex-shrink-0"}),Object(G.jsx)("span",{children:"Pause stream"})]})}),Object(G.jsx)(de,{})]}):null,Object(G.jsx)(ue,{children:Object(G.jsxs)("button",{className:"inline-flex items-center font-semibold",onClick:p.stop,children:[Object(G.jsx)($e,{className:"mr-4 flex-shrink-0"}),Object(G.jsx)("span",{children:" Stop stream "})]})})]})]})}var Lt=["stream","className","disableMsg","enableMsg"];function Pt(e){var t,n=e.stream,a=e.className,r=e.disableMsg,s=e.enableMsg,c=Object(o.a)(e,Lt),l=(t={},Object(B.a)(t,Nt,{colorClass:"text-special-hold",label:r||"Enabled"}),Object(B.a)(t,kt,{colorClass:"text-special-active",label:s||"Disabled"}),t)[n.is_auto_deposit_enabled?"enabled":"disabled"]||{};return Object(G.jsx)("div",Object(i.a)(Object(i.a)({className:Y()(l.colorClass,a)},c),{},{children:l.label}))}function Wt(e){var t=e.stream,n=Ot(t.id),r=Object(a.useState)(""),s=Object(m.a)(r,2),c=s[0],i=s[1],o=Fe(t.ticker),l=ut(!1);return{isDisabled:!Qt(t),modal:Object(G.jsxs)(Dt.a,{isOpen:l.on,onRequestClose:l.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(G.jsx)("h2",{className:"text-2xl mb-6",children:"Amount to deposit"}),Object(G.jsx)(ae,{className:"mb-4",children:Object(G.jsx)("input",{placeholder:"0.00 ".concat(t.ticker),className:"text-black",value:c,onChange:function(e){return i(e.target.value)}})}),Object(G.jsx)($,{className:"w-full",variant:"filled",type:"button",onClick:function(){return n.deposit({token:t.ticker,deposit:o.toInt(c)})},children:"Add funds"})]}),modalControl:l}}function Vt(e){var t=e.stream,n=e.className,a=Wt({stream:t});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)($,{variant:"filled",type:"button",onClick:a.modalControl.turnOn,disabled:a.isDisabled,className:n,children:[Object(G.jsx)(Ke,{className:"mr-2"}),"Add funds"]}),a.modal]})}function Ut(e){var t=e.stream,n=e.variant,a=void 0===n?"filled":n,r=Wt({stream:t});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)($,{disabled:r.isDisabled,variant:a,color:"dark",type:"button",onClick:r.modalControl.turnOn,children:[Object(G.jsx)(tt,{className:"mr-2"}),"Add funds"]}),r.modal]})}function Bt(e){var t=e.stream,n=e.minimal,a=e.className,r=e.disableMsg,s=e.enableMsg,c=U(),i=c.near.accountId===t.owner_id,o=c.near.accountId===t.receiver_id,l=!i&&!o,u=t.status===vt.INTERRUPTED||t.status===vt.FINISHED,d=Ot(t.id),b=ut(!1),j=b.on&&!d.loading;return u||l?Object(G.jsx)(Pt,{stream:t,enableMsg:s,disableMsg:r}):Object(G.jsxs)("div",{className:Y()(a,"relative inline-flex"),children:[Object(G.jsx)(me,{minimal:n,opened:j,onChange:b.setOn,className:"flex-grow",children:Object(G.jsx)(Pt,{stream:t,enableMsg:s,disableMsg:r})}),Object(G.jsx)(le,{opened:j,className:"top-full w-44",onClose:b.turnOff,children:t.is_auto_deposit_enabled?Object(G.jsx)(ue,{children:Object(G.jsxs)("button",{className:"inline-flex items-center font-semibold w-full",onClick:d.disable,children:[Object(G.jsx)(et,{className:"mr-4 flex-shrink-0"}),Object(G.jsx)("span",{children:"Disable"})]})}):Object(G.jsx)(ue,{children:Object(G.jsxs)("button",{className:"inline-flex items-center font-semibold w-full",onClick:d.enable,children:[Object(G.jsx)(Qe,{className:"mr-4 flex-shrink-0"}),Object(G.jsx)("span",{children:"Enable"})]})})})]})}var Ht=n(364),zt=n(362),qt={xYears:"{{count}} years",xMonths:"{{count}} months",xDays:"{{count}}d",xSeconds:"{{count}}s",xMinutes:"{{count}}m",xHours:"{{count}}h"},Zt={formatDistance:function(e,t){return qt[e].replace("{{count}}",t)}};function Yt(e){return e instanceof Date&&!isNaN(e)}function Gt(e){var t=e.untilTimestamp,n=e.suffix,r=e.finishedText,s=function(e){var t=e.untilTimestamp,n=new Date(t),r=Yt(n),s=Object(a.useState)(!r||(new Date).getTime()>n.getTime()),c=Object(m.a)(s,2),i=c[0],o=c[1],l=Object(a.useState)(i?null:Object(Ht.a)({start:new Date,end:n})),u=Object(m.a)(l,2),d=u[0],b=u[1];return Object(a.useEffect)((function(){var e=new Date(t);if(Yt(e)){var n=setInterval((function(){var t=(new Date).getTime()>e.getTime();if(o(t),b(null),!t){var n=Object(Ht.a)({start:new Date,end:e});b(n)}}),1e3);return function(){return clearInterval(n)}}}),[t,i]),{duration:d,dateValid:r,expired:i}}({untilTimestamp:t}),c=s.duration,i=s.dateValid,o=s.expired;if(!i)return Object(G.jsx)("span",{children:"Invalid Date"});if(!c||o)return Object(G.jsx)("span",{children:r});(c.days||c.weeks||c.months||c.years)&&(c.seconds=0);var l=Object(zt.a)(c,{locale:Zt})+(n||"");return Object(G.jsx)("span",{children:l})}function Jt(e){var t=e.stream,n=e.account;return n?t.owner_id===n.account_id?"out":t.receiver_id===n.account_id?"in":"":""}function Xt(e){return e.status===vt.INITIALIZED||e.status===vt.PAUSED}function Kt(e){return e.status===vt.FINISHED||e.status===vt.INTERRUPTED}function Qt(e){return e.available_to_withdraw!==e.balance}function $t(e,t){var n=t,a="".concat(window.location.origin,"/#/streams/").concat(e.id),r=n.ticksToMs(Math.round((e.balance-e.available_to_withdraw)/e.tokens_per_tick)),s=new Date((new Date).getTime()+r),c=s.getTime(),i=Number(e.balance)+Number(e.tokens_total_withdrawn),o=Number(e.tokens_total_withdrawn),l=Number(e.tokens_total_withdrawn)+Number(e.available_to_withdraw),u=Number(e.available_to_withdraw),d=i-l,b={left:(i-l)/i,streamed:l/i,withdrawn:o/i,available:u/i};return{dateEnd:s,progresses:[o/i,l/i],tf:n,isDead:Kt(e),isFundable:Qt(e),percentages:b,link:a,timestampEnd:c,secondsLeft:r,progress:{full:i,withdrawn:o,streamed:l,left:d,available:u}}}var en=["label","formattedFloatValue","percentageValue","colorClass","className"];function tn(e){var t=e.label,n=e.formattedFloatValue,a=e.percentageValue,r=e.colorClass,s=e.className,c=Object(o.a)(e,en);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:s},c),{},{children:[Object(G.jsx)(Re,{className:Y()(r,"mr-1")}),Object(G.jsxs)("span",{children:[t,": ",Object(G.jsxs)("span",{className:"font-semibold",children:[n," "]}),Object(G.jsxs)("span",{className:"text-gray",children:[" ","(",S()(a).format({output:"percent",mantissa:1}),")"]})]})]}))}var nn={id:"51ofCnrPfZ8WA4NWJAnGYvNM1yqDfsVQqpaoxkYz3aZE",description:"qweqweqwe",owner_id:"ggoshanov.testnet",receiver_id:"sdf.testnet",ticker:"NEAR",timestamp_created:"1633966709524321545",balance:"1990000000000000000000000",tokens_per_tick:"33333333333333",is_auto_deposit_enabled:!0,status:"ACTIVE",tokens_total_withdrawn:"0",available_to_withdraw:"1990000000000000000000000",history_len:4,direction:"out"};function an(e){var t=e.stream,n=void 0===t?nn:t,a=e.direction,r=e.className,s=Fe(n.ticker),c=$t(n,s),i=c.dateEnd,o=c.progresses,l=c.timestampEnd,d=c.percentages,b=c.progress,j=b.full,m=b.withdrawn,h=b.streamed,p=c.link,x=Object(Ht.a)({start:new Date,end:i}),f=Object(zt.a)(x,{locale:Zt});return Object(G.jsxs)("div",{className:Y()("grid grid-cols-12 gap-6 justify-items-center","p-10 bg-input rounded-3xl",r),children:[Object(G.jsxs)(u.b,{to:ot(n.id),className:"w-full col-span-12 xl:col-span-6 justify-self-start",children:[Object(G.jsxs)("div",{className:"flex items-center",children:[Object(G.jsx)(Ae,{tokenName:n.ticker,className:"mr-4"}),Object(G.jsxs)("div",{className:"w-full gap-4 flex items-end flex-wrap",children:[Object(G.jsxs)("div",{className:"text-2xl whitespace-nowrap flex-shrink-0",children:[s.amount(h)," of ",s.amount(j)," ",Object(G.jsx)("span",{className:"uppercase",children:n.ticker})]}),Object(G.jsx)(xt,{stream:n,direction:a}),Object(G.jsx)("div",{className:"whitespace-nowrap",children:Xt(n)?f:Object(G.jsx)(Gt,{untilTimestamp:l,suffix:" remaining"})})]})]}),Object(G.jsx)(we,{className:"mt-5",progresses:o}),Object(G.jsxs)("div",{className:"flex text-sm mt-3 mr-3",children:[Object(G.jsx)(tn,{className:"mr-4",label:"Withdrawn",colorClass:"bg-streams-withdrawn",formattedFloatValue:s.amount(m)+" "+n.ticker,percentageValue:d.withdrawn}),Object(G.jsx)(tn,{label:"Streamed",colorClass:"bg-streams-streamed",formattedFloatValue:s.amount(h)+" "+n.ticker,percentageValue:d.streamed})]})]}),Object(G.jsx)("div",{className:"hidden xl:block"}),Object(G.jsxs)("div",{className:"flex gap-5 justify-between xl:justify-end col-span-12 xl:col-span-5 w-full items-center flex-wrap md:flex-nowrap",children:["in"===a?Object(G.jsxs)("div",{className:"w-44",children:[Object(G.jsx)("div",{className:"text-gray",children:"Sender:"}),Object(G.jsx)("div",{className:"break-words",children:n.owner_id})]}):Object(G.jsxs)("div",{className:"w-44",children:[Object(G.jsx)("div",{className:"text-gray",children:"Receiver:"}),Object(G.jsx)("div",{className:"break-words",children:n.receiver_id})]}),Object(G.jsxs)("div",{className:"w-24",children:[Object(G.jsx)("div",{className:"text-gray",children:"Status:"}),Object(G.jsx)(Ft,{className:"w-full",minimal:!0,stream:n})]}),"out"===a?Object(G.jsxs)("div",{className:"col-span-1 mr-4",children:[Object(G.jsx)("div",{className:"text-gray",children:"Auto\u2011dep:"}),Object(G.jsx)(Bt,{minimal:!0,stream:n})]}):null,Object(G.jsxs)("div",{className:"flex items-start justify-end w-52",children:["out"===a?Object(G.jsx)(Vt,{className:"flex-grow",stream:n}):null,Object(G.jsx)($,{className:"ml-3",variant:"filled",onClick:function(){return ht()(p)},to:ot(n.id),children:Object(G.jsx)(nt,{})})]})]})]})}var rn=n(363),sn=["label","children"],cn=["label","children","className"],on=["stream","account","className"],ln={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"},un=function(e){var t=e.label,n=e.children,a=Object(o.a)(e,sn);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({},a),{},{children:[Object(G.jsx)("div",{className:"text-gray text-sm",children:t}),Object(G.jsx)("div",{className:"font-semibold text-lg break-words select-all",children:n})]}))},dn=function(e){var t=e.label,n=e.children,a=e.className,r=Object(o.a)(e,cn);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:Y()("flex justify-between my-3",a)},r),{},{children:[Object(G.jsx)("div",{className:"text-gray text-sm",children:t}),Object(G.jsx)("div",{className:"text-sm text-right",children:n})]}))};function bn(e){var t=e.stream,n=void 0===t?ln:t,a=e.account,r=e.className,s=Object(o.a)(e,on),c=U(),l=Fe(n.ticker),u=$t(n,l),d=u.dateEnd,b=u.percentages,j=u.timestampEnd,m=(u.secondsLeft,u.progress),h=m.full,p=m.streamed,x=m.left,f=m.available,O=Object(Ht.a)({start:new Date,end:d}),v=Object(zt.a)(O,{locale:Zt}),g=Jt({stream:n,account:a});return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:Y()("pt-10 p-9 bg-input rounded-3xl",r)},s),{},{children:[Object(G.jsxs)("div",{className:"flex text-center justify-between",children:["in"===g?Object(G.jsx)(un,{label:"Sender:",className:"w-1/2 mr-4",children:n.owner_id}):Object(G.jsx)(un,{label:"Receiver:",className:"w-1/2 mr-4",children:n.receiver_id}),Object(G.jsx)(un,{label:"Time Remaining:",className:"w-1/2",children:Xt(n)?v:Object(G.jsx)(Gt,{untilTimestamp:j,finishedText:"Finished"})})]}),Object(G.jsx)("div",{className:"border-t border-border mt-8 mb-9"}),Object(G.jsx)(dn,{label:"Stream Created:",children:Object(rn.a)(new Date(n.timestamp_created/1e6),"Yo MMM do")}),Object(G.jsx)(dn,{label:"Token:",children:n.ticker}),Object(G.jsxs)(dn,{label:"Total:",children:[l.amount(h)," ",n.ticker]}),Object(G.jsx)(dn,{label:"Tokens Transferred:",children:Object(G.jsxs)("span",{children:[l.amount(p)," ",n.ticker," ",Object(G.jsxs)("span",{className:"text-gray",children:["(",S()(b.streamed).format({output:"percent",mantissa:2}),")"]})]})}),Object(G.jsx)(dn,{label:"Tokens Left:",children:Object(G.jsxs)("span",{children:[l.amount(x)," ",n.ticker," ",Object(G.jsxs)("span",{className:"text-gray",children:["(",S()(b.left).format({output:"percent",mantissa:2}),")"]})]})}),Object(G.jsxs)(dn,{label:"Tokens Available:",children:[l.amount(f)," ",n.ticker]}),Object(G.jsxs)(dn,{label:"Stream update & withdrawal fee:",children:[l.amount(n.available_to_withdraw*c.roketo.tokenMeta(n.ticker).commission_percentage/100)," ",n.ticker," ",Object(G.jsxs)("span",{className:"text-gray",children:["(",S()(c.roketo.tokenMeta(n.ticker).commission_percentage/100).format({output:"percent",mantissa:2}),")"]})]}),Object(G.jsx)(dn,{label:"Speed:",children:Object(G.jsx)(xt,{stream:n,direction:null})}),"in"===g?Object(G.jsx)(dn,{label:"Latest Withdrawal:",children:Object(rn.a)(new Date(a.last_action/1e6),"MMM dd, Yo  H:m")}):"",Object(G.jsx)(dn,{label:"Auto-deposit:",children:n.is_auto_deposit_enabled?"Enabled":"Disabled"}),Object(G.jsxs)(dn,{label:"Stream ID:",children:[Object(G.jsx)("div",{className:"inline-block w-24 overflow-ellipsis overflow-hidden",children:n.id}),Object(G.jsx)("button",{onClick:function(){return ht()(n.id)},className:"hover:text-blue",children:Object(G.jsx)(Be,{})})]})]}))}var jn=n(32);function mn(e,t){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{direction:e.owner_id===t?wt:e.receiver_id===t?gt:null})}))}function hn(e,t){return pn.apply(this,arguments)}function pn(){return(pn=Object(j.a)(b.a.mark((function e(t,n){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,r=n.near,e.next=4,r.contractApi.getStream({streamId:a});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=Object(j.a)(b.a.mark((function e(t,n){var a,r,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,r=t.from,s=t.to,c=n.near,e.next=4,c.contractApi.getStreamHistory({streamId:a,from:r,to:s});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(){return(On=Object(j.a)(b.a.mark((function e(t,n){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.near,e.next=3,Promise.all(t.map((function(e){return a.contractApi.getStream({streamId:e})})));case 3:return r=e.sent,s=mn(r,a.near.account.accountId),e.abrupt("return",{inputs:s.filter((function(e){return e.direction===gt})),outputs:s.filter((function(e){return e.direction===wt}))});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e){var t=e.near;return Object(jn.a)(["account",t.near.accountId],t.contractApi.getCurrentAccount,{errorRetryInterval:250})}function gn(e){var t=e.near,n=e.accountSWR.data;return Object(jn.a)((function(){return!!n&&["streams",n.account_id,n.last_action]}),(function(){return function(e,t){return On.apply(this,arguments)}([].concat(Object(pe.a)(n.dynamic_inputs),Object(pe.a)(n.dynamic_outputs),Object(pe.a)(n.static_streams)),{near:t})}))}var wn,Nn=n(70),kn=n.n(Nn);function _n(e){var t=e.ticker,n=e.balance,a=e.className,r=U(),s=Fe(t),c=r.tokens.get(t),i=s.amount(n);return Object(G.jsxs)("div",{className:Y()("inline-flex items-center p-2 rounded-lg bg-card2",a),children:[Object(G.jsx)(Ae,{tokenName:t,className:"mr-2"})," ",Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{children:[Object(G.jsx)("span",{className:"font-semibold",children:i})," ",Object(G.jsx)("span",{className:"text-gray",children:t})]}),Object(G.jsx)("div",{children:c.metadata.name})]})]})}function yn(e){var t=U(),n=Ot(),r=Object(jn.b)().mutate,s=ut(!1),c=function(){var e=U(),t=vn({near:e}),n=gn({near:e,accountSWR:t}),r=Object(a.useMemo)((function(){var e={};return t.data&&n.data&&(t.data.ready_to_withdraw.forEach((function(t){var n=Object(m.a)(t,2),a=n[0],r=n[1];e[a]=e[a]||0,e[a]+=Number(r)})),n.data.inputs.forEach((function(t){e[t.ticker]=e[t.ticker]||0,e[t.ticker]+=Number(t.available_to_withdraw)}))),e}),[t.data,n.data]),s=Object(jn.a)((function(){var e=Object(i.a)({},r);delete e.NEAR;var t=Object.keys(e);return t.sort(),JSON.stringify(t)}),(function(t){var n=JSON.parse(t);return Promise.all(n.map(function(){var t=Object(j.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,e.tokens.ftStorageBalance(n);case 3:return t.t1=!!t.sent,t.abrupt("return",[t.t0,t.t1]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),{refreshInterval:5e3}),c=!t.data||!n.data||!s.data,o=(s.data||[]).filter((function(e){return!1===e[1]})),l=0===o.length&&s.data;return{balances:Object.entries(r),loading:c,notRegisteredTokens:o,isSafeToWithdraw:l}}(),o=c.balances,l=c.loading,u=(c.isSafeToWithdraw,c.notRegisteredTokens);function d(){return(d=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateAllAndWithdraw({tokensWithoutStorage:u.length});case 2:r(["account",t.near.accountId]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=Object(G.jsxs)(kn.a,{isOpen:s.on,onRequestClose:s.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(G.jsx)("h2",{className:"text-2xl mb-6",children:"Restricted withdrawal"}),Object(G.jsxs)("p",{children:["Due to NEP-141 issues you are required to do storage deposit before withdrawing. You can do it by buying any amount of"," ",u.map((function(e){return e[0]})).join(", ")," tokens at any DEX"]})]}),p=l?function(){}:function(){return d.apply(this,arguments)};return o=o.map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(G.jsx)(_n,{ticker:n,balance:a,className:"w-full mb-2"},n)})),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Me,{placement:"bottom",align:{offset:[0,20]},offset:{bottom:20},overlay:Object(G.jsxs)("div",{className:"text-left",children:[Object(G.jsx)("p",{className:"mb-4 text-gray",children:"Move all received tokens to your wallet. With Roketo you can only withdraw from all your streams simultaneously."}),Object(G.jsx)("div",{className:"text-left",children:l?Object(G.jsx)("p",{className:"font-semibold text-center",children:"Loading balances..."}):o.length?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{className:"font-semibold mb-2",children:"Available balances:"}),Object(G.jsx)("div",{children:o})]}):Object(G.jsx)("p",{className:"font-semibold text-center",children:"You have nothing to withdraw"})})]}),children:Object(G.jsx)($,Object(i.a)(Object(i.a)({loadingText:"Updating account..."},e),{},{loading:n.loading,onClick:p}))}),s.on?h:null]})}function Cn(e){var t=e.stream,n=e.account,a=Fe(t.ticker),r=$t(t,a),s=r.progresses,c=r.percentages,i=r.isDead,o=r.progress,l=o.full,u=o.withdrawn,d=o.streamed,b=Jt({stream:t,account:n});return Object(G.jsxs)("div",{className:Y()("flex","flex-col","items-center"),children:[Object(G.jsxs)("div",{className:"-mb-32",children:[Object(G.jsx)(Me,{align:{offset:[0,-20]},offset:{top:20},overlay:Object(G.jsxs)("div",{className:"text-left",children:[Object(G.jsx)(tn,{className:"whitespace-nowrap mb-2",label:"Withdrawn",colorClass:"bg-streams-withdrawn",formattedFloatValue:a.amount(u)+" "+t.ticker,percentageValue:c.withdrawn}),Object(G.jsx)(tn,{className:"whitespace-nowrap",label:"Streamed",colorClass:"bg-streams-streamed",formattedFloatValue:a.amount(d)+" "+t.ticker,percentageValue:c.streamed})]}),children:Object(G.jsx)(ke,{className:"w-96 h-48",progresses:s})}),Object(G.jsxs)("div",{className:"flex justify-between pt-5 -mx-2 text-gray",children:[Object(G.jsx)("div",{className:"w-10 text-center",children:" 0%"}),Object(G.jsx)("div",{className:"w-10 text-center",children:" 100%"})]})]}),Object(G.jsx)(Ae,{size:14,tokenName:t.ticker,className:"mb-8"}),Object(G.jsx)("div",{className:"text-6xl font-semibold",children:a.amount(d)}),Object(G.jsxs)("div",{className:"text-gray font-semibold",children:["of ",a.amount(l)," ",t.ticker]}),Object(G.jsx)(xt,{stream:t,direction:b,className:"mt-6 mb-6"}),i?"":Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"flex relative z-10",children:[Object(G.jsx)(Ft,{stream:t,className:"mr-2"}),"out"===b?Object(G.jsx)(Ut,{variant:"outlined",stream:t}):"in"===b?Object(G.jsx)(yn,{loadingText:"Withdrawing...",variant:"outlined",color:"dark",children:"Withdraw from all streams"}):null]}),"out"===b?Object(G.jsx)(Bt,{stream:t,enableMsg:"Enable auto-deposit",disableMsg:"Disable auto-deposit",className:"mt-4 w-72"}):null]})]})}var In=["children","className"],Sn=["children","className"],An=["actionType","className"],En=["stream","history","currentPage","onNextPageClick","onPrevPageClick","maxPage","pageSize","loading","className"];function Tn(e){var t=e.children,n=e.className,a=Object(o.a)(e,In);return Object(G.jsx)("th",Object(i.a)(Object(i.a)({className:Y()("text-gray font-normal text-left p-4",n)},a),{},{children:t}))}function Mn(e){var t=e.children,n=e.className,a=Object(o.a)(e,Sn);return Object(G.jsx)("td",Object(i.a)(Object(i.a)({className:Y()("first:rounded-l-xl last:rounded-r-xl p-4 font-normal text-left h-14 bg-input",n)},a),{},{children:t}))}var Dn,Rn=(wn={},Object(B.a)(wn,_t,"text-special-active"),Object(B.a)(wn,yt,"text-special-active"),Object(B.a)(wn,Ct,"text-special-active"),Object(B.a)(wn,It,"text-special-hold"),Object(B.a)(wn,St,"text-special-inactive"),Object(B.a)(wn,At,"text-special-inactive"),wn);function Fn(e){var t=e.actionType,n=e.className,a=Object(o.a)(e,An);return Object(G.jsx)("span",Object(i.a)(Object(i.a)({className:Y()(Rn[t],n)},a),{},{children:t}))}function Ln(e){var t=e.stream,n=e.history,a=e.currentPage,r=e.onNextPageClick,s=e.onPrevPageClick,c=e.maxPage,l=e.pageSize,u=e.loading,d=e.className,b=Object(o.a)(e,En),j=Fe(t.ticker);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:Y()("border-separate Table",d)},b),{},{children:[Object(G.jsxs)("table",{className:"border-separate Table w-full",children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)(Tn,{children:"Actor"}),Object(G.jsx)(Tn,{children:"Action Type"}),Object(G.jsx)(Tn,{children:"Amount"}),Object(G.jsx)(Tn,{children:"Commission"}),Object(G.jsx)(Tn,{children:"Timestamp"})]})}),Object(G.jsx)("tbody",{children:u?Array(l).fill(null).map((function(e,t){return Object(G.jsxs)("tr",{className:"mb-2",children:[Object(G.jsx)(Mn,{}),Object(G.jsx)(Mn,{}),Object(G.jsx)(Mn,{}),Object(G.jsx)(Mn,{}),Object(G.jsx)(Mn,{})]},t)})):n.map((function(e){return Object(G.jsxs)("tr",{className:"mb-2",children:[Object(G.jsx)(Mn,{className:"break-all w-42",children:e.actor}),Object(G.jsx)(Mn,{children:Object(G.jsx)(Fn,{actionType:e.action_type})}),Object(G.jsx)(Mn,{children:e.amount?"".concat(j.amount(e.amount)," ").concat(t.ticker):""}),Object(G.jsx)(Mn,{children:e.commission_on_withdraw?"".concat(j.amount(e.commission_on_withdraw)," ").concat(t.ticker):""}),Object(G.jsx)(Mn,{children:Object(rn.a)((n=e.timestamp,{fromNanosec:function(){return n/1e3/1e3}}).fromNanosec(),"yyyy MMM dd HH:mm:ss")})]},e.timestamp+e.action_type);var n}))})]}),Object(G.jsxs)("div",{className:Y()("flex justify-between",0===c?"invisible":""),children:[Object(G.jsx)("button",{className:Y()("p-2 hover:bg-hover hover:border-hover border border-border rounded-xl",a<=0?"invisible":""),onClick:s,children:"Prev Page"}),Object(G.jsx)("div",{className:Y()("rounded-full border-border border w-10 h-10 inline-flex items-center justify-center"),children:a+1}),Object(G.jsx)("button",{className:Y()("p-2 hover:bg-hover hover:border-hover border border-border rounded-xl",a>=c?"invisible":""),onClick:r,children:"Next Page"})]})]}))}function Pn(e){var t=e.options,n=Object.keys(t),r=Object(a.useState)(n[0]),s=Object(m.a)(r,2),c=s[0],i=s[1],o=t[c];return Object(a.useMemo)((function(){return{option:c,selectOption:i,options:t,optionsArray:n,currentFilterFunction:o}}),[t,c])}var Wn="All",Vn="Incoming",Un="Outgoing",Bn=(Dn={ALL:"All",ACTIVE:"Active",PAUSED:"Paused",ARCHIVED:"Archived"},Object(B.a)(Dn,vt.FINISHED,"Finished"),Object(B.a)(Dn,vt.INTERRUPTED,"Interrupted"),Dn);function Hn(e){var t=Object(a.useMemo)((function(){var e;return e={},Object(B.a)(e,Bn.ALL,(function(){return!0})),Object(B.a)(e,Bn.ACTIVE,(function(e){return e.status===vt.ACTIVE})),Object(B.a)(e,Bn.PAUSED,(function(e){return e.status===vt.PAUSED})),Object(B.a)(e,Bn.ARCHIVED,(function(e){return e.status===vt.ARCHIVED})),Object(B.a)(e,Bn[vt.INTERRUPTED],(function(e){return e.status===vt.INTERRUPTED})),Object(B.a)(e,Bn[vt.FINISHED],(function(e){return e.status===vt.FINISHED})),e}),[]),n=Object(a.useMemo)((function(){var e;return e={},Object(B.a)(e,Wn,(function(){return!0})),Object(B.a)(e,Vn,(function(e){return gt===e.direction})),Object(B.a)(e,Un,(function(e){return wt===e.direction})),e}),[]),r=Pn({options:t}),s=Pn({options:n}),c=function(e){var t=e.items,n=e.filters,r=Object(a.useState)([]),s=Object(m.a)(r,2),c=s[0],i=s[1],o=Object(a.useState)([]),l=Object(m.a)(o,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){var e=t,a=[];n.forEach((function(t){var n={};Object.keys(t.options).forEach((function(a){var r=e.filter(t.options[a]);n[a]=r}));var r={};Object.keys(n).forEach((function(e){return r[e]=n[e].length})),a.push(r),e=n[t.option]})),d(a),i(e)}),[t,n]),{filterCounts:u,filteredItems:c}}({items:e,filters:Object(a.useMemo)((function(){return[s,r,s]}),[s,r])});return{statusFilter:r,directionFilter:s,result:c}}function zn(e,t,n){return Number(e[n])>Number(t[n])?-1:Number(e[n])<Number(t[n])?1:0}var qn={bigBalanceFirst:{label:"With big balances",fn:function(e,t){return zn(e,t,"balance")}},highSpeedFirst:{label:"With high speed",fn:function(e,t){return zn(e,t,"tokens_per_tick")}},highSpeedLast:{label:"With low speed",fn:function(e,t){return-1*zn(e,t,"tokens_per_tick")}},mostRecent:{label:"Most recent",fn:function(e,t){return zn(e,t,"timestamp_created")}}},Zn=[vt.INITIALIZED,vt.ACTIVE,vt.PAUSED,vt.INTERRUPTED,vt.FINISHED];function Yn(e,t){return Zn.indexOf(e.status)-Zn.indexOf(t.status)}function Gn(e){var t=e.items,n=e.onFilterDone,r=e.className,s=Hn(t),c=Object(a.useState)(qn.mostRecent),i=Object(m.a)(c,2),o=i[0],l=i[1],u=Object.values(qn);return Object(a.useEffect)((function(){var e=Object(pe.a)(s.result.filteredItems);e.sort(Yn),e.sort(o.fn),n(e)}),[s.result.filteredItems,n,o.fn]),Object(G.jsxs)("div",{className:Y()("md:flex",r),children:[Object(G.jsx)(ie,{className:"mr-5 z-10",options:s.directionFilter.optionsArray,label:"Type:",active:s.directionFilter.option,onChange:s.directionFilter.selectOption,renderOption:function(e){var t=s.result.filterCounts[0];return Object(G.jsx)(ce,{option:e,count:t?t[e]:""})}}),Object(G.jsx)(ie,{className:"z-10",options:s.statusFilter.optionsArray,label:"Status:",active:s.statusFilter.option,onChange:s.statusFilter.selectOption,renderOption:function(e){var t=s.result.filterCounts[1];return Object(G.jsx)(ce,{option:e,count:t?t[e]:""})}}),Object(G.jsx)("div",{className:"flex-grow"}),Object(G.jsx)(ie,{className:"mt-3 md:mt-0",minimal:!0,options:u,label:"Show first:",active:o,onChange:l,renderOption:function(e){return Object(G.jsx)("span",{children:e.label})},renderActive:function(e){return Object(G.jsx)("span",{children:e.label})}})]})}var Jn=n.p+"static/media/RUSSIANS_HACK.83d68466.gif",Xn=n.p+"static/media/crab.3fbdb8f2.gif",Kn=["message","onRetry","className"];function Qn(e){var t=e.message,n=e.onRetry,a=e.className,s=(Object(o.a)(e,Kn),r.a.useRef(Math.random()));return Object(G.jsxs)("div",{className:Y()("text-center",a),children:[s.current>.5?Object(G.jsx)("img",{src:Jn,className:"mx-auto",alt:"funny hackers gif with bird dancing around"}):Object(G.jsx)("img",{src:Xn,className:"mx-auto",alt:"crab with a knife tries to hurt people"}),Object(G.jsx)("h1",{className:"text-4xl font-semibold mb-6 mt-10",children:"Something is broken."}),Object(G.jsx)("p",{className:"text-gray mb-4",children:"Finally we have something to fix"}),t&&Object(G.jsx)("code",{className:"p-4 border-special-inactive border block text-special-inactive text-xs mb-4",children:t}),Object(G.jsx)($,{variant:"outlined",color:"dark",className:"mt-10",onClick:n,children:"Try again"}),Object(G.jsx)("p",{className:"text-xs text-gray mt-2",children:"(that probably wont help)"})]})}var $n=[],ea=[];function ta(){var e=U(),t=Object(a.useState)([]),n=Object(m.a)(t,2),r=n[0],s=n[1],c=vn({near:e}),i=gn({near:e,accountSWR:c}),o=function(t){return t.owner_id!==e.near.accountId},l=i.data,u=l?l.inputs:$n,d=l?l.outputs:ea,b=Object(a.useMemo)((function(){return u.concat(d)}),[u,d]),j=c.error||i.error;return Object(G.jsxs)("div",{className:"container mx-auto p-12",children:[Object(G.jsxs)("div",{className:"flex mb-12",children:[Object(G.jsx)("h1",{className:"text-3xl ",children:"All Streams"}),Object(G.jsx)("div",{className:"flex-grow"}),Object(G.jsx)(yn,{variant:"main",size:"normal",children:"Update streams and withdraw"})]}),Object(G.jsx)(Gn,{items:b,onFilterDone:s,className:"mb-10 relative z-10"}),j?Object(G.jsx)(Qn,{className:"max-w-2xl mx-auto py-32",message:j.message,onRetry:function(){c.mutate(),i.mutate()}}):l?0===b.length?Object(G.jsxs)("div",{className:"flex flex-col w-80 mx-auto",children:[Object(G.jsx)("h3",{className:"text-3xl text-center my-12 ",children:"You dont have any streams yet."}),Object(G.jsx)($,{variant:"main",link:!0,to:it,children:"Create First Stream"})]}):0===r.length?Object(G.jsxs)("h3",{className:"text-3xl text-center my-12 w-80 mx-auto",children:["No streams matching your filters. ",Object(G.jsx)("br",{}),"Try selecting different filters!"]}):r.map((function(e){return Object(G.jsx)(an,{stream:e,className:"mb-4",direction:o(e)?"in":"out"},e.id)})):Object(G.jsx)("div",{children:"Loading"})]})}function na(e){var t=e.token,n=e.balance,a=e.streamsLength,r=e.period,s=void 0===r?"":r,c=e.showPeriod,i=void 0===c||c,o=e.className,l=U().tokens.get(t);console.debug(l);var u=1;switch(s){case"min":u=60;break;case"hour":u=3600;break;case"day":u=86400}return n=h.utils.format.formatNearAmount(n),n*=u,Object(G.jsx)("div",{className:Y()("w-full rounded-lg bg-input flex items-center width-full p-6",o),children:Object(G.jsxs)("div",{className:"w-full lg:flex items-center",children:[Object(G.jsxs)("div",{className:"flex items-center",children:[Object(G.jsx)("div",{className:"w-12 mr-4",children:Object(G.jsx)("span",{className:"flex-shrink-0 rounded-full bg-card2 inline-flex items-center justify-center w-12 h-12",children:Object(G.jsx)(Ae,{tokenName:t})})}),Object(G.jsxs)("div",{className:"",children:[Object(G.jsxs)("div",{className:"font-bold",children:[l.metadata.name,", ",t]}),a>0?Object(G.jsxs)("div",{className:"text-gray text-sm",children:["from ",a," steams"]}):""]})]}),Object(G.jsxs)("div",{className:"ml-auto lg:mt-0 mt-4",children:[Object(G.jsx)("span",{className:" text-3xl",children:n<.001?"<0.001":S()(n).format({mantissa:3})}),i?Object(G.jsx)("span",{children:""!==s?"/"+s:""}):""]})]})})}var aa={sec:"/sec",min:"/min",hour:"/hour",day:"/day"};function ra(e){var t=e.account,n=e.header,r=e.icon,s=e.tokensField,c=e.streamsType,i=(e.period,e.showPeriod),o=void 0===i||i,l=e.className,u=U(),d=gn({near:u,accountSWR:vn({near:u})}).data,b=[];"inputs"===c?b=d?d.inputs:[]:"outputs"===c&&(b=d?d.outputs:[]);var j={};void 0!==b&&(j=b.reduce((function(e,t){var n=e[t.ticker]||[];return n.push(t),e[t.ticker]=n,e}),{}));var h=void 0!==t?t[s]:[],p=Pn({options:aa}),x=Object(a.useState)(!1),f=Object(m.a)(x,2),O=f[0],v=f[1],g=p.option;return Object(G.jsxs)("div",{className:l,children:[Object(G.jsxs)("h2",{className:"text-xl mb-6 flex items-center",children:[Object(G.jsx)("span",{className:"mr-3",children:r}),n,Object(G.jsx)("span",{className:"ml-2",children:o?Object(G.jsxs)("div",{className:"inline-flex items-center relative",children:[Object(G.jsx)(me,{minimal:!0,rounded:!0,onChange:v,children:p.options[g]}),Object(G.jsx)(le,{opened:O,className:"right-0",onClose:function(){return v(!1)},children:p.optionsArray.map((function(e,t){return Object(G.jsx)(ue,{children:Object(G.jsx)(he,{label:e,active:g===e,value:e,onChange:p.selectOption})},t)}))})]}):""})]}),Object(G.jsx)("div",{children:h.map((function(e){return Object(G.jsx)(na,{token:e[0],balance:e[1],streamsLength:j[e[0]]?j[e[0]].length:0,period:g,showPeriod:o,className:"mb-4"})}))})]})}var sa=n(365),ca="RUNNING",ia="NOT_RUNNING",oa="INITIALIZING";q.c().shape({cronDeposit:q.d().required("Deposit is a required"),cadence:q.d().required("Period is a required")});function la(){var e=U(),t=ut(!1),n=vn({near:e});Fe("NEAR");var a=n.data,r=a?a.cron_task?ca:ia:oa,s=Object(G.jsxs)(kn.a,{isOpen:t.on,onRequestClose:t.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(G.jsx)("h2",{className:"text-2xl mb-6",children:"CRON subscription"}),Object(G.jsx)("p",{children:"We provide Cron via Croncat. Croncat is temporary disabled due to technical issues, we are helping them to resolve"})]});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)($,{variant:"main",size:"normal",className:"p-0",onClick:function(e){t.turnOn()},children:[Object(G.jsx)("span",{className:"mr-2",children:Object(G.jsx)(Xe,{})}),r===ca?"Update task":r===ia?"Subscribe to CRON":r===oa?"Initializing CRON":""]}),t.on?s:null]})}function ua(){var e=U(),t=vn({near:e});var n=t.data;console.debug(n);n&&n.inputs,n&&n.outputs;var a=t.error;return Object(G.jsxs)("div",{className:"container mx-auto p-12",children:[Object(G.jsxs)("div",{className:"md:flex justify-between items-center mb-10",children:[Object(G.jsx)("h1",{className:"text-3xl",children:"My Account"}),Object(G.jsxs)("div",{className:"flex items-center md:mt-0 mt-4",children:[n&&null!==n.last_action?Object(G.jsxs)("div",{className:"mr-12 text-gray flex items-center",children:[Object(G.jsx)("span",{className:"mr-2",children:Object(G.jsx)(Je,{})}),Object(G.jsxs)("span",{children:["Last updated\xa0",Object(sa.a)(new Date(n.last_action/1e3/1e3),new Date,{addSuffix:!0})]})]}):"",Object(G.jsx)(la,{})]})]}),a?Object(G.jsx)(Qn,{className:"max-w-2xl mx-auto py-32",message:a.message,onRetry:t.mutate}):Object(G.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[Object(G.jsx)(ra,{icon:Object(G.jsx)(qe,{}),header:"Receiving",account:n,tokensField:"total_incoming",streamsType:"inputs",period:"sec"},"AccountInputs"),Object(G.jsx)(ra,{icon:Object(G.jsx)(Ze,{}),header:"Sending",account:n,tokensField:"total_outgoing",streamsType:"outputs",period:"sec"},"AccountOutputs"),Object(G.jsx)(ra,{icon:Object(G.jsx)(Ge,{}),header:"Withdrawn",account:n,tokensField:"total_received",showPeriod:!1},"AccountWithdrawn")]})]})}function da(){return Object(G.jsx)("div",{className:"flex h-screen mx-3",children:Object(G.jsx)("div",{className:"lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5",style:{"background-color":"#0D0B26"},children:Object(G.jsxs)("div",{className:"my-24 text-center",children:[Object(G.jsxs)("h1",{className:"text-3xl mb-4 font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(G.jsx)("p",{className:"text-gray",children:"Click button below to login or create new account"}),Object(G.jsx)(rt,{variant:"main",className:"mt-10 rounded-lg py-4 px-8"})]})})})}var ba=["to","className"],ja=["className","link"];function ma(e){var t=e.to,n=e.className,a=Object(o.a)(e,ba);return Object(G.jsxs)(u.b,Object(i.a)(Object(i.a)({to:t,className:Y()("group flex items-center",n)},a),{},{children:[Object(G.jsx)("div",{className:"flex items-center justify-center h-11 w-11 rounded-full border-border border group-hover:bg-border mr-4",children:Object(G.jsx)(at,{})}),Object(G.jsx)("span",{className:"uppercase text-gray text-xs",children:" Back "})]}))}function ha(e){var t=e.className,n=e.link,a=Object(o.a)(e,ja);return Object(G.jsxs)("div",Object(i.a)(Object(i.a)({className:t},a),{},{children:[Object(G.jsx)("div",{className:"mb-4 text-gray text-center",children:"Public link to view the stream:"}),Object(G.jsxs)("div",{className:"border border-border bg-input py-4 px-5 rounded-2xl flex items-center",children:[Object(G.jsx)("div",{className:"break-all select-all",children:n}),Object(G.jsx)("div",{className:"w-px bg-border mx-6 self-stretch flex-shrink-0"}),Object(G.jsxs)("button",{className:"whitespace-nowrap text-blue py-2 px-3 font-semibold text-sm inline-flex bg-transparent hover:bg-hover active:bg-input rounded-lg transition",onClick:function(){return ht()(n)},variant:"filled",children:[Object(G.jsx)(nt,{className:"mr-2"}),"Copy Link"]})]})]}))}function pa(){var e=U(),t=Object(l.h)(),n=vn({near:e}),s=function(e,t){var n=e.streamId,a=t.near,s=t.accountSWR.data,c=Object(jn.a)((function(){return!!s&&["stream",n,s.id,s.last_action]}),Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn({streamId:n},{near:a});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),{errorRetryInterval:2e3,errorRetryCount:3}),i=c.data||{},o=i.balance===i.available_to_withdraw;return r.a.useEffect((function(){if(i.status===vt.ACTIVE&&!o){var e=setInterval(c.mutate,1e3);return function(){return clearInterval(e)}}}),[i.status,o,c]),c}({streamId:t.id},{near:e,accountSWR:n}),c=function(e,t){var n=e.pageSize,r=void 0===n?3:n,s=t.near,c=t.accountSWR,i=t.streamSWR,o=r,l=c.data,u=i.data,d=u?u.id:null,h=Object(a.useState)(0),p=Object(m.a)(h,2),x=p[0],f=p[1],O=u?Math.ceil(u.history_len/o)-1:0,v=x>1,g=Object(jn.a)((function(){return!!u&&["stream_history",u.id,l.last_action,x]}),Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn({streamId:d,from:x*o,to:(x+1)*o},{near:s});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),{onError:function(e,t){console.debug("useSingleStreamHistory error",e)}});return Object(jn.a)((function(){return!!u&&["stream_history",u.id,l.last_action,x+1]}),Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={streamId:d,from:(x+1)*o,to:(x+2)*o},e.next=3,xn(t,{near:s});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),{swr:g,canGoBack:v,nextPage:function(){f(x+1)},prevPage:function(){f(x-1)},maxPage:O,currentPage:x}}({pageSize:10},{near:e,accountSWR:n,streamSWR:s}),i=c.swr,o=c.nextPage,u=c.prevPage,d=c.maxPage,h=c.currentPage,p=n.data,x=s.data,f=Fe(x?x.ticker:""),O=i.data||[],v=s.error||n.error,g=x&&p;return Object(G.jsxs)("div",{className:"container mx-auto p-12",children:[Object(G.jsx)("div",{className:"mb-10",children:Object(G.jsx)(ma,{to:ct})}),v?Object(G.jsx)(Qn,{className:"max-w-2xl mx-auto py-32",message:v.message,onRetry:function(){n.mutate(),s.mutate()}}):null===x?Object(G.jsx)("div",{children:Object(G.jsxs)("h1",{className:"text-center my-32 text-2xl text-semibold",children:[" ","Stream does not exists"," "]})}):g?function(){var e=$t(x,f).link;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between",children:[Object(G.jsxs)("div",{className:"flex flex-col items-center flex-grow",children:[Object(G.jsx)(Cn,{stream:x,account:p}),Object(G.jsx)(ha,{link:e,className:"max-w-xl w-full mt-28"})]}),Object(G.jsx)(bn,{className:"mt-10 w-full lg:mt-0 lg:w-1/3 self-start",stream:x,account:p})]}),Object(G.jsx)(Ln,{pageSize:10,loading:!i.data,stream:x,history:O,className:"mx-auto max-w-6xl my-24 w-full",onPrevPageClick:u,onNextPageClick:o,maxPage:d,currentPage:h})]})}():Object(G.jsx)("div",{className:"py-32 text-center text-gray text-2xl",children:"Loading..."})]})}var xa=["children","allowed","redirect"];function fa(e){var t=e.children,n=e.allowed,a=e.redirect,r=Object(o.a)(e,xa);return Object(G.jsx)(l.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){e.location;return n?t:a}}))}var Oa=function(){var e=function(){var e=r.a.useRef(null),t=r.a.useRef(null),n=r.a.useRef(null),s=Object(a.useState)(!1),c=Object(m.a)(s,2),o=c[0],l=c[1],u=Object(a.useState)(F),d=Object(m.a)(u,2),h=d[0],p=d[1],f={signedIn:!!h.accountId,signedAccountId:h.accountId};function O(){return(O=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,h.walletConnection.requestSignIn(x.contractName,"Roketo Token Streaming Service");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){h.walletConnection.signOut(),p(Object(i.a)(Object(i.a)({},h),{},{accountId:null}))}function g(){return(g=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),e.next=3,v();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){var a=Object(j.a)(b.a.mark((function a(){var r,s,c,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P();case 2:return(r=a.sent).near,console.debug("Create Near"),s=new y({account:r.account,walletConnection:r.walletConnection}),console.debug("Create Roketo"),a.next=9,s.init();case 9:return c=new T({wallet:r.walletConnection,operationalCommission:s.status.operational_commission,contractId:s._contract.contractId,near:r.near}),console.debug("Create Croncat"),i=new R({tokens:s.status.tokens,account:r.walletConnection.account()}),a.next=14,i.init();case 14:console.debug("Create ft-tokens"),e.current=s,t.current=c,n.current=i,p(r),l(!0);case 20:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[]),{auth:f,near:h,roketo:e.current,contractApi:e.current?e.current.api:null,croncat:t.current,tokens:n.current,inited:o,login:function(){return O.apply(this,arguments)},logout:v,refreshAllowance:function(){return g.apply(this,arguments)}}}(),t=e.inited;return Object(G.jsx)(L.Provider,{value:e,children:Object(G.jsx)("div",{className:"bg-dark text-white",children:t?Object(G.jsxs)(u.a,{basename:"",children:[Object(G.jsx)(jt,{}),Object(G.jsxs)(l.d,{children:[Object(G.jsx)(fa,{exact:!0,redirect:Object(G.jsx)(l.a,{to:"/"}),allowed:!e.auth.signedIn,path:"/authorize",children:Object(G.jsx)(da,{})}),Object(G.jsx)(fa,{exact:!0,redirect:Object(G.jsx)(l.a,{to:"/authorize"}),allowed:e.auth.signedIn,path:"/",children:Object(G.jsx)(Ue,{})}),Object(G.jsx)(fa,{exact:!0,redirect:Object(G.jsx)(l.a,{to:"/authorize"}),allowed:e.auth.signedIn,path:"/account",children:Object(G.jsx)(ua,{})}),Object(G.jsx)(l.b,{exact:!0,path:"/streams/:id",children:Object(G.jsx)(pa,{})}),Object(G.jsx)(fa,{exact:!0,redirect:Object(G.jsx)(l.a,{to:"/authorize"}),allowed:e.auth.signedIn,path:"/streams",children:Object(G.jsx)(ta,{})})]})]}):null})})},va=(n(360),document.getElementById("root"));Dt.a.setAppElement(va),c.a.render(Object(G.jsx)(Oa,{}),va)}},[[361,1,2]]]);
//# sourceMappingURL=main.14123678.chunk.js.map